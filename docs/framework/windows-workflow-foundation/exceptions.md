---
title: "예외"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 065205cc-52dd-4f30-9578-b17d8d113136
caps.latest.revision: "26"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: d1484f3b0af3ee09f1cb18d3d90f81fb0a2044a9
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/21/2017
---
# <a name="exceptions"></a><span data-ttu-id="40fde-102">예외</span><span class="sxs-lookup"><span data-stu-id="40fde-102">Exceptions</span></span>
<span data-ttu-id="40fde-103">워크플로에서 <xref:System.Activities.Statements.TryCatch> 활동을 사용하여 워크플로 실행 중에 발생하는 예외를 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-103">Workflows can use the <xref:System.Activities.Statements.TryCatch> activity to handle exceptions that are raised during the execution of a workflow.</span></span> <span data-ttu-id="40fde-104">이러한 예외를 처리하거나 <xref:System.Activities.Statements.Rethrow> 활동을 사용하여 다시 throw할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-104">These exceptions can be handled or they can be re-thrown using the <xref:System.Activities.Statements.Rethrow> activity.</span></span> <span data-ttu-id="40fde-105"><xref:System.Activities.Statements.TryCatch.Finally%2A> 섹션의 활동은 <xref:System.Activities.Statements.TryCatch.Try%2A> 섹션 또는 <xref:System.Activities.Statements.TryCatch.Catches%2A> 섹션이 완료되면 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-105">Activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section are executed when either the <xref:System.Activities.Statements.TryCatch.Try%2A> section or the <xref:System.Activities.Statements.TryCatch.Catches%2A> section completes.</span></span> <span data-ttu-id="40fde-106">워크플로 호스팅하는 <xref:System.Activities.WorkflowApplication> 인스턴스를 사용할 수도 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> 이벤트 처리기에서 처리 되지 않은 예외를 처리 하는 <xref:System.Activities.Statements.TryCatch> 활동입니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-106">Workflows hosted by a <xref:System.Activities.WorkflowApplication> instance can also use the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> event handler to handle exceptions that are not handled by a <xref:System.Activities.Statements.TryCatch> activity.</span></span>  
  
## <a name="causes-of-exceptions"></a><span data-ttu-id="40fde-107">예외의 원인</span><span class="sxs-lookup"><span data-stu-id="40fde-107">Causes of Exceptions</span></span>  
 <span data-ttu-id="40fde-108">워크플로에서 다음과 같은 방식으로 예외가 생성될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-108">In a workflow, exceptions can be generated in the following ways:</span></span>  
  
-   <span data-ttu-id="40fde-109"><xref:System.Activities.Statements.TransactionScope>에서 트랜잭션의 시간 초과</span><span class="sxs-lookup"><span data-stu-id="40fde-109">A time-out of transactions in <xref:System.Activities.Statements.TransactionScope>.</span></span>  
  
-   <span data-ttu-id="40fde-110"><xref:System.Activities.Statements.Throw> 활동을 사용하여 워크플로에서 throw된 명시적 예외.</span><span class="sxs-lookup"><span data-stu-id="40fde-110">An explicit exception thrown by the workflow using the <xref:System.Activities.Statements.Throw> activity.</span></span>  
  
-   <span data-ttu-id="40fde-111">활동에서 throw되는 [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] 예외</span><span class="sxs-lookup"><span data-stu-id="40fde-111">A [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] exception thrown from an activity.</span></span>  
  
-   <span data-ttu-id="40fde-112">워크플로에서 사용되는 라이브러리, 구성 요소 또는 서비스와 같은 외부 코드에서 throw되는 예외</span><span class="sxs-lookup"><span data-stu-id="40fde-112">An exception thrown from external code, such as libraries, components, or services that are used in the workflow.</span></span>  
  
## <a name="handling-exceptions"></a><span data-ttu-id="40fde-113">예외 처리</span><span class="sxs-lookup"><span data-stu-id="40fde-113">Handling Exceptions</span></span>  
 <span data-ttu-id="40fde-114">활동에서 예외가 throw되었지만 처리되지 않은 경우 워크플로 인스턴스를 종료하는 것이 기본 동작입니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-114">If an exception is thrown by an activity and is unhandled, the default behavior is to terminate the workflow instance.</span></span> <span data-ttu-id="40fde-115">사용자 지정 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> 처리기가 있는 경우 이 기본 동작을 재정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-115">If a custom <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is present, it can override this default behavior.</span></span> <span data-ttu-id="40fde-116">워크플로 호스트 작성자는 이 처리기를 사용하여 사용자 지정 로깅, 워크플로 중단, 워크플로 취소, 워크플로 종료 등의 적절한 처리를 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-116">This handler gives the workflow host author an opportunity to provide the appropriate handling, such as custom logging, aborting the workflow, canceling the workflow, or terminating the workflow.</span></span>  <span data-ttu-id="40fde-117">처리할 수 없는 예외가 워크플로에 발생한 경우 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> 처리기가 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-117">If a workflow raises an exception that is not handled, the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is invoked.</span></span> <span data-ttu-id="40fde-118">워크플로의 최종 결과를 결정하는 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>에서 반환된 가능한 동작에는 3가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-118">There are three possible actions returned from <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> which determine the final outcome of the workflow.</span></span>  
  
-   <span data-ttu-id="40fde-119">**취소** -취소 된 워크플로 인스턴스는 분기 실행의 정상적인 방식으로 종료 합니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-119">**Cancel** - A cancelled workflow instance is a graceful exit of a branch execution.</span></span> <span data-ttu-id="40fde-120">취소 동작은 CancellationScope 활동을 사용하는 경우와 같이 모델링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-120">You can model cancelation behavior (for example, by using a CancellationScope activity).</span></span> <span data-ttu-id="40fde-121">완료된 처리기는 취소 프로세스가 완료되면 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-121">The Completed handler is invoked when the cancellation process completes.</span></span> <span data-ttu-id="40fde-122">취소된 워크플로는 Cancelled 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-122">A cancelled workflow is in the Cancelled state.</span></span>  
  
-   <span data-ttu-id="40fde-123">**종료** -종료 된 워크플로 인스턴스를 다시 시작 하거나 다시 시작할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-123">**Terminate** - A terminated workflow instance cannot be resumed or restarted.</span></span>  <span data-ttu-id="40fde-124">이 실행에서는 종료된 이유로서 예외를 제공할 수 있는 완료된 이벤트를 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-124">This triggers the Completed event in which you can provide an exception as the reason it was terminated.</span></span> <span data-ttu-id="40fde-125">종료된 처리기는 종료 프로세스가 완료되면 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-125">The Terminated handler is invoked when the termination process completes.</span></span> <span data-ttu-id="40fde-126">종료된 워크플로는 Faulted 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-126">A terminated workflow is in the Faulted state.</span></span>  
  
-   <span data-ttu-id="40fde-127">**중단** -영구적인 것으로 구성 된 경우에, 중단 된 워크플로 인스턴스는 다시 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-127">**Abort** - An aborted workflow instances can be resumed only if it has been configured to be persistent.</span></span>  <span data-ttu-id="40fde-128">지속성이 없을 경우 워크플로는 재개할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-128">Without persistence, a workflow cannot be resumed.</span></span>  <span data-ttu-id="40fde-129">이렇게 하면 워크플로가 중단된 경우 마지막 유지 시점 이후의 모든 작업 수행(메모리)이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-129">At the point a workflow is aborted, any work done (in memory) since the last persistence point will be lost.</span></span> <span data-ttu-id="40fde-130">중단된 워크플로의 경우 중단 프로세스가 완료된 이유로서 중단된 처리기가 예외를 통해 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-130">For an aborted workflow, the Aborted handler is invoked using the exception as the reason when the abort process completes.</span></span> <span data-ttu-id="40fde-131">그러나, Cancelled 및 Terminated와 같이 Completed 처리기는 호출되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-131">However, unlike Cancelled and Terminated, the Completed handler is not invoked.</span></span> <span data-ttu-id="40fde-132">중단된 워크플로가 중단된 상태인 경우입니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-132">An aborted workflow is in an Aborted state.</span></span>  
  
 <span data-ttu-id="40fde-133">다음 예제에서는 예외를 throw하는 워크플로를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-133">The following example invokes a workflow that throws an exception.</span></span> <span data-ttu-id="40fde-134">이 예외는 워크플로에서 처리되지 않으며 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> 처리기가 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-134">The exception is unhandled by the workflow and the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is invoked.</span></span> <span data-ttu-id="40fde-135"><xref:System.Activities.WorkflowApplicationUnhandledExceptionEventArgs>를 검사하여 예외에 대한 정보를 제공하고 워크플로가 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-135">The <xref:System.Activities.WorkflowApplicationUnhandledExceptionEventArgs> are inspected to provide information about the exception, and the workflow is terminated.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#1](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#1)]  
  
### <a name="handling-exceptions-with-the-trycatch-activity"></a><span data-ttu-id="40fde-136">TryCatch 활동을 사용하여 예외 처리</span><span class="sxs-lookup"><span data-stu-id="40fde-136">Handling Exceptions with the TryCatch Activity</span></span>  
 <span data-ttu-id="40fde-137">워크플로 내부의 예외 처리는 <xref:System.Activities.Statements.TryCatch> 활동을 통해 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-137">Handling exceptions inside a workflow is performed with the <xref:System.Activities.Statements.TryCatch> activity.</span></span> <span data-ttu-id="40fde-138"><xref:System.Activities.Statements.TryCatch> 활동에는 특정 <xref:System.Activities.Statements.TryCatch.Catches%2A> 형식에 각각 연결되는 <xref:System.Activities.Statements.Catch> 활동의 <xref:System.Exception> 컬렉션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-138">The <xref:System.Activities.Statements.TryCatch> activity has a <xref:System.Activities.Statements.TryCatch.Catches%2A> collection of <xref:System.Activities.Statements.Catch> activities that are each associated with a specific <xref:System.Exception> type.</span></span> <span data-ttu-id="40fde-139"><xref:System.Activities.Statements.TryCatch.Try%2A> 활동의 <xref:System.Activities.Statements.TryCatch> 섹션에 포함된 활동에 의해 throw된 예외가 <xref:System.Activities.Statements.Catch%601> 컬렉션의 <xref:System.Activities.Statements.TryCatch.Catches%2A> 활동의 예외와 일치하면 예외가 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-139">If the exception thrown by an activity that is contained in the <xref:System.Activities.Statements.TryCatch.Try%2A> section of a <xref:System.Activities.Statements.TryCatch> activity matches the exception of a <xref:System.Activities.Statements.Catch%601> activity in the <xref:System.Activities.Statements.TryCatch.Catches%2A> collection, then the exception is handled.</span></span> <span data-ttu-id="40fde-140">예외가 명시적으로 다시 throw되거나 새 예외가 throw될 경우 이 예외는 부모 활동에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-140">If the exception is explicitly re-thrown or a new exception is thrown then this exception passes up to the parent activity.</span></span> <span data-ttu-id="40fde-141">다음 코드 예제에서는 <xref:System.Activities.Statements.TryCatch> 섹션에서 <xref:System.ApplicationException> 활동에 의해 throw되는 <xref:System.Activities.Statements.TryCatch.Try%2A>을 처리하는 <xref:System.Activities.Statements.Throw> 활동을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-141">The following code example shows a <xref:System.Activities.Statements.TryCatch> activity that handles an <xref:System.ApplicationException> that is thrown in the <xref:System.Activities.Statements.TryCatch.Try%2A> section by a <xref:System.Activities.Statements.Throw> activity.</span></span> <span data-ttu-id="40fde-142">예외 메시지는 <xref:System.Activities.Statements.Catch%601> 활동에 의해 콘솔에 기록된 다음 <xref:System.Activities.Statements.TryCatch.Finally%2A> 섹션에서 콘솔에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-142">The exception's message is written to the console by the <xref:System.Activities.Statements.Catch%601> activity, and then a message is written to the console in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#33](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]  
  
 <span data-ttu-id="40fde-143"><xref:System.Activities.Statements.TryCatch.Finally%2A> 섹션의 활동은 <xref:System.Activities.Statements.TryCatch.Try%2A> 섹션 또는 <xref:System.Activities.Statements.TryCatch.Catches%2A> 섹션이 성공적으로 완료되면 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-143">The activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section are executed when either the <xref:System.Activities.Statements.TryCatch.Try%2A> section or the <xref:System.Activities.Statements.TryCatch.Catches%2A> section successfully completes.</span></span> <span data-ttu-id="40fde-144"><xref:System.Activities.Statements.TryCatch.Try%2A> 단원은 예외가 throw되면 성공적으로 완료되고 예외가 throw되거나 다시 throw되지 않으면 <xref:System.Activities.Statements.TryCatch.Catches%2A> 단원이 성공적으로 완료됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-144">The <xref:System.Activities.Statements.TryCatch.Try%2A> section successfully completes if no exceptions are thrown from it, and the <xref:System.Activities.Statements.TryCatch.Catches%2A> section successfully completes if no exceptions are thrown or rethrown from it.</span></span> <span data-ttu-id="40fde-145">예외가 <xref:System.Activities.Statements.TryCatch.Try%2A>의 <xref:System.Activities.Statements.TryCatch> 단원에서 throw되고 <xref:System.Activities.Statements.Catch%601> 단원에서 <xref:System.Activities.Statements.TryCatch.Catches%2A>에 의해 처리되지 않거나 <xref:System.Activities.Statements.TryCatch.Catches%2A>에서 다시 throw되면 <xref:System.Activities.Statements.TryCatch.Finally%2A>의 모든 활동은 다음 중 하나가 발생하지 않는 한 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-145">If an exception is thrown in the <xref:System.Activities.Statements.TryCatch.Try%2A> section of a <xref:System.Activities.Statements.TryCatch> and is either not handled by a <xref:System.Activities.Statements.Catch%601> in the <xref:System.Activities.Statements.TryCatch.Catches%2A> section, or is rethrown from the <xref:System.Activities.Statements.TryCatch.Catches%2A>, the activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> will not be executed unless the one of the following occurs.</span></span>  
  
-   <span data-ttu-id="40fde-146">더 높은 수준의 <xref:System.Activities.Statements.TryCatch>에서 예외가 다시 throw되는지 여부에 관계 없이 워크플로에서 더 높은 수준의 <xref:System.Activities.Statements.TryCatch> 활동에 의해 예외가 catch됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-146">The exception is caught by a higher level <xref:System.Activities.Statements.TryCatch> activity in the workflow, regardless of whether it is rethrown from that higher level <xref:System.Activities.Statements.TryCatch>.</span></span>  
  
-   <span data-ttu-id="40fde-147">예외는 더 높은 수준의 <xref:System.Activities.Statements.TryCatch>에서 처리되며 워크플로 루트를 이스케이프하며 워크플로는 종료하거나 중단하는 대신 취소하도록 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-147">The exception is not handled by a higher level <xref:System.Activities.Statements.TryCatch>, escapes the root of the workflow, and the workflow is configured to cancel instead of terminate or abort.</span></span> <span data-ttu-id="40fde-148"><xref:System.Activities.WorkflowApplication>을 사용하여 호스트된 워크플로는 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>을 처리하고 <xref:System.Activities.UnhandledExceptionAction.Cancel>을 반환하여 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-148">Workflows hosted using <xref:System.Activities.WorkflowApplication> can configure this by handling <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> and returning <xref:System.Activities.UnhandledExceptionAction.Cancel>.</span></span> <span data-ttu-id="40fde-149"><xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>의 처리 예제는 이 항목에 이전에 제공된 것입니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-149">An example of handling <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> is provided previously in this topic.</span></span> <span data-ttu-id="40fde-150"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>을 워크플로 서비스는 사용하고 <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel>을 지정하여 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-150">Workflow services can configure this by using <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> and specifying <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel>.</span></span> <span data-ttu-id="40fde-151">구성에 대 한 예제 <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, 참조 [워크플로 서비스 호스트 확장명](../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-151">For an example of configuring <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, see [Workflow Service Host Extensibility](../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md).</span></span>  
  
## <a name="exception-handling-versus-compensation"></a><span data-ttu-id="40fde-152">예외 처리와 보정 비교</span><span class="sxs-lookup"><span data-stu-id="40fde-152">Exception Handling versus Compensation</span></span>  
 <span data-ttu-id="40fde-153">예외 처리와 보정의 차이점은 예외 처리는 활동 실행 중에 발생하고,</span><span class="sxs-lookup"><span data-stu-id="40fde-153">The difference between exception handling and compensation is that exception handling occurs during the execution of an activity.</span></span> <span data-ttu-id="40fde-154">보정은 활동이 완료된 이후에 발생한다는 점입니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-154">Compensation occurs after an activity has successfully completed.</span></span> <span data-ttu-id="40fde-155">예외 처리를 사용하면 활동에서 예외가 발생한 이후에 정리 작업이 가능하고, 보정을 사용하면 이전에 성공적으로 완료된 활동을 실행 취소할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-155">Exception handling provides an opportunity to clean up after the activity raises the exception, whereas compensation provides a mechanism by which the successfully completed work of a previously completed activity can be undone.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="40fde-156">[보정](../../../docs/framework/windows-workflow-foundation/compensation.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="40fde-156"> [Compensation](../../../docs/framework/windows-workflow-foundation/compensation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="40fde-157">참고 항목</span><span class="sxs-lookup"><span data-stu-id="40fde-157">See Also</span></span>  
 <xref:System.Activities.Statements.TryCatch>  
 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>  
 <xref:System.Activities.Statements.CompensableActivity>
