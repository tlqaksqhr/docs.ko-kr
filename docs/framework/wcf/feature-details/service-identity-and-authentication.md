---
title: "서비스 ID 및 인증"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- authentication [WCF], specifying the identity of a service
ms.assetid: a4c8f52c-5b30-45c4-a545-63244aba82be
caps.latest.revision: 
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 579f41a213564dd18dae719a14170100903efd92
ms.sourcegitcommit: 973a12d1e6962cd9a9c263fbfaad040ec8267fe9
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/22/2018
---
# <a name="service-identity-and-authentication"></a><span data-ttu-id="fd89e-102">서비스 ID 및 인증</span><span class="sxs-lookup"><span data-stu-id="fd89e-102">Service Identity and Authentication</span></span>
<span data-ttu-id="fd89e-103">서비스의 *끝점 id*서비스 설명 언어 WSDL (웹 서비스)에서 생성 된 값입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-103">A service's *endpoint identity*is a value generated from the service Web Services Description Language (WSDL).</span></span> <span data-ttu-id="fd89e-104">모든 클라이언트에 전파되는 이 값은 서비스를 인증하는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-104">This value, propagated to any client, is used to authenticate the service.</span></span> <span data-ttu-id="fd89e-105">클라이언트가 끝점에 대한 통신을 시작하고 서비스가 클라이언트에 대해 인증되면 클라이언트는 끝점 ID 값과 끝점 인증 프로세스에서 반환된 실제 값을 비교합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-105">After the client initiates a communication to an endpoint and the service authenticates itself to the client, the client compares the endpoint identity value with the actual value the endpoint authentication process returned.</span></span> <span data-ttu-id="fd89e-106">두 값이 일치하는 경우 클라이언트는 예상 서비스 끝점에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-106">If they match, the client is assured it has contacted the expected service endpoint.</span></span> <span data-ttu-id="fd89e-107">이 역할에 대 한 보호 *피싱* 하면 클라이언트가 악성 서비스에서 호스팅된 끝점에 리디렉션되지 않도록 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-107">This functions as a protection against *phishing* by preventing a client from being redirected to an endpoint hosted by a malicious service.</span></span>  
  
 <span data-ttu-id="fd89e-108">참조 id 설정이 보여 주는 샘플 응용 프로그램, [Service Identity 샘플](../../../../docs/framework/wcf/samples/service-identity-sample.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-108">For a sample application that demonstrates identity setting, see [Service Identity Sample](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="fd89e-109"> 끝점 및 끝점 주소 참조 [주소](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-109"> endpoints and endpoint addresses, see [Addresses](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fd89e-110">인증을 위해 NTLM(NT LanMan)을 사용하는 경우 NTLM에서 클라이언트는 서버를 인증할 수 없기 때문에 서비스 ID가 확인되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-110">When you use NT LanMan (NTLM) for authentication, the service identity is not checked because, under NTLM, the client is unable to authenticate the server.</span></span> <span data-ttu-id="fd89e-111">NTLM은 컴퓨터가 Windows 작업 그룹의 일부이거나 Kerberos 인증을 지원하지 않는 이전 버전의 Windows를 실해하는 경우 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-111">NTLM is used when computers are part of a Windows workgroup, or when running an older version of Windows that does not support Kerberos authentication.</span></span>  
  
 <span data-ttu-id="fd89e-112">클라이언트가 보안 채널을 시작하여 이를 통해 메시지를 서비스에 보낼 때 [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] 인프라는 서비스를 인증하고 서비스 ID가 클라이언트가 사용하는 끝점 주소에 지정된 ID와 일치하는 경우에만 메시지를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-112">When the client initiates a secure channel to send a message to a service over it, the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] infrastructure authenticates the service, and only sends the message if the service identity matches the identity specified in the endpoint address the client uses.</span></span>  
  
 <span data-ttu-id="fd89e-113">다음 단계를 통해 ID 처리를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-113">Identity processing consists of the following stages:</span></span>  
  
-   <span data-ttu-id="fd89e-114">디자인 타임에 클라이언트 개발자는 WSDL을 통해 노출된 끝점의 메타데이터에서 서비스의 ID를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-114">At design time, the client developer determines the service's identity from the endpoint's metadata (exposed through WSDL).</span></span>  
  
-   <span data-ttu-id="fd89e-115">런타임에 클라이언트 응용 프로그램은 메시지를 서비스에 보내기 전에 서비스의 보안 자격 증명 클레임을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-115">At runtime, the client application checks the claims of the service's security credentials before sending any messages to the service.</span></span>  
  
 <span data-ttu-id="fd89e-116">클라이언트에서의 ID 처리 작업은 서비스에 대한 클라이언트 인증과 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-116">Identity processing on the client is analogous to client authentication on the service.</span></span> <span data-ttu-id="fd89e-117">보안 서비스는 클라이언트의 자격 증명이 인증될 때까지 코드를 실행하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-117">A secure service does not execute code until the client's credentials have been authenticated.</span></span> <span data-ttu-id="fd89e-118">마찬가지로 서비스 메타데이터에서 미리 알려진 정보에 따라 서비스의 자격 증명이 인증될 때까지 클라이언트에서 메시지를 서비스로 보내지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-118">Likewise, the client does not send messages to the service until the service's credentials have been authenticated based on what is known in advance from the service's metadata.</span></span>  
  
 <span data-ttu-id="fd89e-119"><xref:System.ServiceModel.EndpointAddress.Identity%2A> 클래스의 <xref:System.ServiceModel.EndpointAddress> 속성은 클라이언트에서 호출한 서비스의 ID를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-119">The <xref:System.ServiceModel.EndpointAddress.Identity%2A> property of the <xref:System.ServiceModel.EndpointAddress> class represents the identity of the service called by the client.</span></span> <span data-ttu-id="fd89e-120">서비스는 메타데이터에 <xref:System.ServiceModel.EndpointAddress.Identity%2A>를 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-120">The service publishes the <xref:System.ServiceModel.EndpointAddress.Identity%2A> in its metadata.</span></span> <span data-ttu-id="fd89e-121">클라이언트 개발자가 실행 하는 경우는 [ServiceModel Metadata 유틸리티 도구 (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) 서비스 끝점에 대해 생성 된 구성에는 서비스의 값이 포함 된 <xref:System.ServiceModel.EndpointAddress.Identity%2A> 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-121">When the client developer runs the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against the service endpoint, the generated configuration contains the value of the service's <xref:System.ServiceModel.EndpointAddress.Identity%2A> property.</span></span> <span data-ttu-id="fd89e-122">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 인프라는 보안이 설정된 상태로 구성된 경우 서비스가 지정된 ID를 소유하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-122">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastructure (if configured with security) verifies that the service possesses the identity specified.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="fd89e-123">메타데이터에는 서비스의 예상 ID가 포함되어 있기 때문에 서비스에 대한 HTTPS 끝점을 만드는 것과 같이 보안을 설정하여 서비스 메타데이터를 노출하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-123">The metadata contains the expected identity of the service, so it is recommended that you expose the service metadata through secure means, for example, by creating an HTTPS endpoint for the service.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="fd89e-124"> [방법: 메타 데이터 끝점 보안](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-124"> [How to: Secure Metadata Endpoints](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span></span>  
  
## <a name="identity-types"></a><span data-ttu-id="fd89e-125">ID 형식</span><span class="sxs-lookup"><span data-stu-id="fd89e-125">Identity Types</span></span>  
 <span data-ttu-id="fd89e-126">서비스 id의 6 개의 형식을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-126">A service can provide six types of identities.</span></span> <span data-ttu-id="fd89e-127">각 ID 형식은 구성의 `<identity>` 요소 내에 포함될 수 있는 요소에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-127">Each identity type corresponds to an element that can be contained inside the `<identity>` element in configuration.</span></span> <span data-ttu-id="fd89e-128">사용되는 형식은 시나리오 및 서비스 보안 요구 사항에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-128">The type used depends on the scenario and the service's security requirements.</span></span> <span data-ttu-id="fd89e-129">다음 표에서는 각 ID 형식에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-129">The following table describes each identity type.</span></span>  
  
|<span data-ttu-id="fd89e-130">ID 형식</span><span class="sxs-lookup"><span data-stu-id="fd89e-130">Identity type</span></span>|<span data-ttu-id="fd89e-131">설명</span><span class="sxs-lookup"><span data-stu-id="fd89e-131">Description</span></span>|<span data-ttu-id="fd89e-132">일반적인 시나리오</span><span class="sxs-lookup"><span data-stu-id="fd89e-132">Typical scenario</span></span>|  
|-------------------|-----------------|----------------------|  
|<span data-ttu-id="fd89e-133">DNS(Domain Name System)</span><span class="sxs-lookup"><span data-stu-id="fd89e-133">Domain Name System (DNS)</span></span>|<span data-ttu-id="fd89e-134">이 요소를 X.509 인증서 또는 Windows 계정과 함께 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-134">Use this element with X.509 certificates or Windows accounts.</span></span> <span data-ttu-id="fd89e-135">자격 증명에 지정된 DNS 이름과 이 요소에 지정된 값을 비교합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-135">It compares the DNS name specified in the credential with the value specified in this element.</span></span>|<span data-ttu-id="fd89e-136">DNS 검사를 사용하면 DNS 또는 주체 이름을 가진 인증서를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-136">A DNS check enables you to use certificates with DNS or subject names.</span></span> <span data-ttu-id="fd89e-137">DNS 또는 주체 이름이 같은 인증서를 다시 발급하는 경우 ID 검사가 계속 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-137">If a certificate is reissued with the same DNS or subject name, then the identity check is still valid.</span></span> <span data-ttu-id="fd89e-138">인증서를 다시 발급하면 새 RSA 키를 얻게 되지만 같은 DNS 또는 주체 이름을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-138">When a certificate is reissued, it gets a new RSA key but retains the same DNS or subject name.</span></span> <span data-ttu-id="fd89e-139">따라서 클라이언트는 서비스에 대한 ID 정보를 업데이트할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-139">This means that clients do not have to update their identity information about the service.</span></span>|  
|<span data-ttu-id="fd89e-140">인증서.</span><span class="sxs-lookup"><span data-stu-id="fd89e-140">Certificate.</span></span> <span data-ttu-id="fd89e-141">`ClientCredentialType`을 Certificate로 설정한 경우 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-141">The default when `ClientCredentialType` is set to Certificate.</span></span>|<span data-ttu-id="fd89e-142">이 요소는 클라이언트와 비교할 Base64 인코딩된 X.509 인증서 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-142">This element specifies a Base64-encoded X.509 certificate value to compare with the client.</span></span><br /><br /> <span data-ttu-id="fd89e-143">또한 서비스를 인증할 자격 증명으로 [!INCLUDE[infocard](../../../../includes/infocard-md.md)]를 사용하는 경우 이 요소를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-143">Also use this element when using a [!INCLUDE[infocard](../../../../includes/infocard-md.md)] as a credential to authenticate the service.</span></span>|<span data-ttu-id="fd89e-144">이 요소는 지문 값에 따라 하나의 인증서만 사용하도록 인증을 제한합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-144">This element restricts authentication to a single certificate based upon its thumbprint value.</span></span> <span data-ttu-id="fd89e-145">이렇게 하면 고유한 지문 값을 가지므로 인증을 강화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-145">This enables stricter authentication because thumbprint values are unique.</span></span> <span data-ttu-id="fd89e-146">이 경우 "주체 이름이 같은 인증서를 다시 발급하는 경우에도 새 지문이 제공됩니다."라는 경고가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-146">This comes with one caveat: If the certificate is reissued with the same Subject name, it also has a new Thumbprint.</span></span> <span data-ttu-id="fd89e-147">따라서 새 지문을 모르는 경우 클라이언트가 서비스의 유효성을 검사할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-147">Therefore, clients are not able to validate the service unless the new thumbprint is known.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="fd89e-148"> 인증서의 지문을 찾기, 참조 [하는 방법: 인증서의 지문을 검색](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-148"> finding a certificate's thumbprint, see [How to: Retrieve the Thumbprint of a Certificate](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span></span>|  
|<span data-ttu-id="fd89e-149">Certificate Reference</span><span class="sxs-lookup"><span data-stu-id="fd89e-149">Certificate Reference</span></span>|<span data-ttu-id="fd89e-150">앞에서 설명한 Certificate 옵션과 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-150">Identical to the Certificate option described previously.</span></span> <span data-ttu-id="fd89e-151">그러나 이 요소를 사용하면 인증서 이름 및 인증서를 검색할 저장소 위치를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-151">However, this element enables you to specify a certificate name and store location from which to retrieve the certificate.</span></span>|<span data-ttu-id="fd89e-152">앞에서 설명한 Certificate 시나리오와 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-152">Same as the Certificate scenario described previously.</span></span><br /><br /> <span data-ttu-id="fd89e-153">인증서 저장소 위치를 변경할 수 있는 이점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-153">The benefit is that the certificate store location can change.</span></span>|  
|<span data-ttu-id="fd89e-154">RSA</span><span class="sxs-lookup"><span data-stu-id="fd89e-154">RSA</span></span>|<span data-ttu-id="fd89e-155">이 요소는 클라이언트와 비교할 RSA 키 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-155">This element specifies an RSA key value to compare with the client.</span></span> <span data-ttu-id="fd89e-156">Certificate 옵션과 비슷하지만 인증서 지문을 사용하는 대신 인증서의 RSA 키를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-156">This is similar to the certificate option but rather than using the certificate's thumbprint, the certificate's RSA key is used instead.</span></span>|<span data-ttu-id="fd89e-157">RSA 검사를 사용하면 RSA 키에 따라 하나의 인증서만 사용하도록 인증을 제한할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-157">An RSA check enables you to specifically restrict authentication to a single certificate based upon its RSA key.</span></span> <span data-ttu-id="fd89e-158">이렇게 하면 RSA 키 값이 변경된 경우 기존 클라이언트와 작동하지 않는 서비스 대신 특정 RSA 키에 대한 인증을 강화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-158">This enables stricter authentication of a specific RSA key at the expense of the service, which no longer works with existing clients if the RSA key value changes.</span></span>|  
|<span data-ttu-id="fd89e-159">UPN(User Principal Name).</span><span class="sxs-lookup"><span data-stu-id="fd89e-159">User principal name (UPN).</span></span> <span data-ttu-id="fd89e-160">`ClientCredentialType`이 Windows로 설정되고 시스템 계정 중 하나로 서비스 프로세스가 실행되지 않는 경우 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-160">The default when the `ClientCredentialType` is set to Windows and the service process is not running under one of the system accounts.</span></span>|<span data-ttu-id="fd89e-161">이 요소는 서비스를 실행하는 UPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-161">This element specifies the UPN that the service is running under.</span></span> <span data-ttu-id="fd89e-162">Kerberos 프로토콜 및 Id 섹션을 참조 [인증을 위해 서비스 Id 재정의](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-162">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="fd89e-163">이렇게 하면 서비스가 특정 Windows 사용자 계정으로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-163">This ensures that the service is running under a specific Windows user account.</span></span> <span data-ttu-id="fd89e-164">사용자 계정은 현재 로그온한 사용자이거나 특정 사용자 계정으로 실행 중인 서비스일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-164">The user account can be either the current logged-on user or the service running under a particular user account.</span></span><br /><br /> <span data-ttu-id="fd89e-165">서비스가 Active Directory 환경 내의 도메인 계정으로 실행 중인 경우 이 설정에서는 Windows Kerberos 보안을 활용합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-165">This setting takes advantage of Windows Kerberos security if the service is running under a domain account within an Active Directory environment.</span></span>|  
|<span data-ttu-id="fd89e-166">SPN(서비스 사용자 이름).</span><span class="sxs-lookup"><span data-stu-id="fd89e-166">Service principal name (SPN).</span></span> <span data-ttu-id="fd89e-167">`ClientCredentialType`을 Windows로 설정하고 서비스 프로세스가 LocalService, LocalSystem 또는 NetworkService의 시스템 계정 중 하나로 실행 중인 경우 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-167">The default when the `ClientCredentialType` is set to Windows and the service process is running under one of the system accounts—LocalService, LocalSystem, or NetworkService.</span></span>|<span data-ttu-id="fd89e-168">이 요소는 서비스 계정과 연결된 SPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-168">This element specifies the SPN associated with the service's account.</span></span> <span data-ttu-id="fd89e-169">Kerberos 프로토콜 및 Id 섹션을 참조 [인증을 위해 서비스 Id 재정의](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-169">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="fd89e-170">이렇게 하면 SPN 및 SPN과 연결된 특정 Windows 계정이 서비스를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-170">This ensures that the SPN and the specific Windows account associated with the SPN identify the service.</span></span><br /><br /> <span data-ttu-id="fd89e-171">Setspn.exe 도구를 사용하여 서비스 사용자 계정의 컴퓨터 계정을 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-171">You can use the Setspn.exe tool to associate a machine account for the service's user account.</span></span><br /><br /> <span data-ttu-id="fd89e-172">서비스가 시스템 계정 중 하나 또는 연결된 SPN 이름을 가진 도메인 계정으로 실행 중이고 컴퓨터가 Active Directory 환경 내의 도메인 멤버인 경우 이 설정에서는 Windows Kerberos 보안을 활용합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-172">This setting takes advantage of Windows Kerberos security if the service is running under one of the system accounts or under a domain account that has an associated SPN name with it and the computer is a member of a domain within an Active Directory environment.</span></span>|  
  
## <a name="specifying-identity-at-the-service"></a><span data-ttu-id="fd89e-173">서비스에서 ID 지정</span><span class="sxs-lookup"><span data-stu-id="fd89e-173">Specifying Identity at the Service</span></span>  
 <span data-ttu-id="fd89e-174">일반적으로 선택한 클라이언트 자격 증명 형식에 따라 서비스 메타데이터에 노출되는 ID 형식이 결정되므로 서비스에 ID를 설정할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-174">Typically, you do not have to set the identity on a service because the selection of a client credential type dictates the type of identity exposed in the service metadata.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="fd89e-175"> 재정의 또는 서비스 id 지정을 참조 하는 방법 [인증을 위해 서비스 Id 재정의](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-175"> how to override or specify service identity, see [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>  
  
## <a name="using-the-identity-element-in-configuration"></a><span data-ttu-id="fd89e-176">사용 하 여 \<identity > 구성 요소</span><span class="sxs-lookup"><span data-stu-id="fd89e-176">Using the \<identity> Element in Configuration</span></span>  
 <span data-ttu-id="fd89e-177">이전에 `Certificate,`에 표시된 바인딩에서 클라이언트 자격 증명 형식을 변경하면 생성된 WSDL에 다음 코드에 표시된 ID 값에 대한 Base64로 serialize된 X.509 인증서가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-177">If you change the client credential type in the binding previously shown to `Certificate,` then the generated WSDL contains a Base64 serialized X.509 certificate for the identity value as shown in the following code.</span></span> <span data-ttu-id="fd89e-178">이는 Windows 이외의 모든 클라이언트 자격 증명 형식에 대한 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-178">This is the default for all client credential types other than Windows.</span></span>  
  
  
  
 <span data-ttu-id="fd89e-179">기본 서비스 id의 값을 변경 하거나 id 형식을 사용 하 여 변경할 수는 `<identity>` 요소 구성에서 또는 코드에 id를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-179">You can change the value of the default service identity or change the type of the identity by using the `<identity>` element in configuration or by setting the identity in code.</span></span> <span data-ttu-id="fd89e-180">다음 구성 코드에서는 값 `contoso.com`으로 DNS(Domain Name System) ID를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-180">The following configuration code sets a domain name system (DNS) identity with the value `contoso.com`.</span></span>  
  
  
  
## <a name="setting-identity-programmatically"></a><span data-ttu-id="fd89e-181">프로그래밍 방식으로 ID 설정</span><span class="sxs-lookup"><span data-stu-id="fd89e-181">Setting Identity Programmatically</span></span>  
 <span data-ttu-id="fd89e-182">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]에서 자동으로 확인하므로 서비스가 명시적으로 ID를 지정할 필요는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-182">Your service does not have to explicitly specify an identity, because [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] automatically determines it.</span></span> <span data-ttu-id="fd89e-183">그러나 필요한 경우 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]에서 끝점에 ID를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-183">However, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] allows you to specify an identity on an endpoint, if required.</span></span> <span data-ttu-id="fd89e-184">다음 코드에서는 특정 DNS ID를 사용하여 새 서비스 끝점을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-184">The following code adds a new service endpoint with a specific DNS identity.</span></span>  
  
 [!code-csharp[C_Identity#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#5)]
 [!code-vb[C_Identity#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#5)]  
  
## <a name="specifying-identity-at-the-client"></a><span data-ttu-id="fd89e-185">클라이언트에서 ID 지정</span><span class="sxs-lookup"><span data-stu-id="fd89e-185">Specifying Identity at the Client</span></span>  
 <span data-ttu-id="fd89e-186">디자인 타임에 클라이언트 개발자는 일반적으로 사용 하 여는 [ServiceModel Metadata 유틸리티 도구 (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) 클라이언트 구성을 생성 하 합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-186">At design time, a client developer typically uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate client configuration.</span></span> <span data-ttu-id="fd89e-187">생성된 구성 파일(클라이언트에서 사용)에는 서버 ID가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-187">The generated configuration file (intended for use by the client) contains the server's identity.</span></span> <span data-ttu-id="fd89e-188">예를 들어, 다음 코드는 앞의 예제에서처럼 DNS ID를 지정하는 서비스에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-188">For example, the following code is generated from a service that specifies a DNS identity, as shown in the preceding example.</span></span> <span data-ttu-id="fd89e-189">클라이언트 끝점 ID 값은 서비스 값과 일치합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-189">Note that the client's endpoint identity value matches that of the service.</span></span> <span data-ttu-id="fd89e-190">이 경우 클라이언트가 서비스에 대한 Windows(Kerberos) 자격 증명을 받을 때 값은 `contoso.com`이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-190">In this case, when the client receives the Windows (Kerberos) credentials for the service, it expects the value to be `contoso.com`.</span></span>  
  
  
  
 <span data-ttu-id="fd89e-191">Windows 대신 서비스가 Certificate를 클라이언트 자격 증명 형식으로 지정하는 경우 인증서의 DNS 속성 값은 `contoso.com`이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-191">If, instead of Windows, the service specifies a certificate as the client credential type, then the certificate's DNS property is expected to be the value `contoso.com`.</span></span> <span data-ttu-id="fd89e-192">또는 DNS 속성이 `null`인 경우 인증서의 주체 이름은 `contoso.com`이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-192">(Or if the DNS property is `null`, the certificate's subject name must be `contoso.com`.)</span></span>  
  
#### <a name="using-a-specific-value-for-identity"></a><span data-ttu-id="fd89e-193">ID에 대해 특정 값 사용</span><span class="sxs-lookup"><span data-stu-id="fd89e-193">Using a Specific Value for Identity</span></span>  
 <span data-ttu-id="fd89e-194">다음 클라이언트 구성 파일에서는 서비스 ID가 특정 값이 되는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-194">The following client configuration file shows how the service's identity is expected to be a specific value.</span></span> <span data-ttu-id="fd89e-195">다음 예제에서 클라이언트는 두 개의 끝점과 통신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-195">In the following example, the client can communicate with two endpoints.</span></span> <span data-ttu-id="fd89e-196">첫 번째 끝점은 인증서 지문으로 식별되고 두 번째는 인증서 RSA 키로 식별됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-196">The first is identified with a certificate thumbprint and the second with a certificate RSA key.</span></span> <span data-ttu-id="fd89e-197">즉, 공개 키/개인 키 쌍만 포함하는 신뢰할 수 있는 기관에서 발급하지 않은 인증서입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-197">That is, a certificate that contains only a public key/private key pair, but is not issued by a trusted authority.</span></span>  
  
  
  
## <a name="identity-checking-at-run-time"></a><span data-ttu-id="fd89e-198">런타임에 ID 검사</span><span class="sxs-lookup"><span data-stu-id="fd89e-198">Identity Checking at Run Time</span></span>  
 <span data-ttu-id="fd89e-199">디자인 타임에 클라이언트 개발자는 메타데이터를 통해 서버 ID를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-199">At design time, a client developer determines the server's identity through its metadata.</span></span> <span data-ttu-id="fd89e-200">런타임에 서비스에서 끝점을 호출하기 전에 ID 검사가 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-200">At runtime, the identity check is performed before calling any endpoints on the service.</span></span>  
  
 <span data-ttu-id="fd89e-201">ID 값은 메타데이터에 의해 지정되는 인증 형식, 즉 서비스에 사용되는 자격 증명 형식과 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-201">The identity value is tied to the type of authentication specified by metadata; in other words, the type of credentials used for the service.</span></span>  
  
 <span data-ttu-id="fd89e-202">채널이 인증을 위해 X.509 인증서를 사용하여 메시지 수준 또는 전송 수준의 SSL(Secure Sockets Layer)을 인증하도록 구성된 경우 다음 ID 값이 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-202">If the channel is configured to authenticate using message- or transport-level Secure Sockets Layer (SSL) with X.509 certificates for authentication, the following identity values are valid:</span></span>  
  
-   <span data-ttu-id="fd89e-203">DNS.</span><span class="sxs-lookup"><span data-stu-id="fd89e-203">DNS.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="fd89e-204">는 SSL 핸드셰이크 중에 제공된 인증서에 DNS가 포함되어 있거나 `CommonName`(CN) 특성이 클라이언트의 DNS ID에 지정된 값과 같은지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-204"> ensures that the certificate provided during the SSL handshake contains a DNS or `CommonName` (CN) attribute equal to the value specified in the DNS identity on the client.</span></span> <span data-ttu-id="fd89e-205">이러한 검사는 서버 인증서 유효성 검사 확인 작업 이외에 추가로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-205">Note that these checks are done in addition to determining the validity of the server certificate.</span></span> <span data-ttu-id="fd89e-206">기본적으로 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]는 서버 인증서가 신뢰할 수 있는 루트 기관에서 발급되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-206">By default, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] validates that the server certificate is issued by a trusted root authority.</span></span>  
  
-   <span data-ttu-id="fd89e-207">인증서.</span><span class="sxs-lookup"><span data-stu-id="fd89e-207">Certificate.</span></span> <span data-ttu-id="fd89e-208">SSL 핸드셰이크 중에 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]는 원격 끝점이 ID에 지정된 정확한 인증서 값을 제공하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-208">During the SSL handshake, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ensures that the remote endpoint provides the exact certificate value specified in the identity.</span></span>  
  
-   <span data-ttu-id="fd89e-209">인증서 참조.</span><span class="sxs-lookup"><span data-stu-id="fd89e-209">Certificate Reference.</span></span> <span data-ttu-id="fd89e-210">인증서와 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-210">Same as Certificate.</span></span>  
  
-   <span data-ttu-id="fd89e-211">RSA.</span><span class="sxs-lookup"><span data-stu-id="fd89e-211">RSA.</span></span> <span data-ttu-id="fd89e-212">SSL 핸드셰이크 중에 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]는 원격 끝점이 ID에 지정된 정확한 RSA 키를 제공하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-212">During the SSL handshake, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ensures that the remote endpoint provides the exact RSA key specified in the identity.</span></span>  
  
 <span data-ttu-id="fd89e-213">서비스가 인증을 목적으로 Windows 자격 증명을 통해 메시지 또는 전송 수준 SSL을 사용하여 인증하고 자격 증명을 협상하는 경우 다음 ID 값이 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-213">If the service authenticates using message- or transport-level SSL with a Windows credential for authentication, and negotiates the credential, the following identity values are valid:</span></span>  
  
-   <span data-ttu-id="fd89e-214">DNS.</span><span class="sxs-lookup"><span data-stu-id="fd89e-214">DNS.</span></span> <span data-ttu-id="fd89e-215">협상은 DNS 이름을 검사할 수 있도록 서비스의 SPN을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-215">The negotiation passes the service's SPN so that the DNS name can be checked.</span></span> <span data-ttu-id="fd89e-216">SPN은 `host/<dns name>` 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-216">The SPN is in the form `host/<dns name>`.</span></span>  
  
-   <span data-ttu-id="fd89e-217">SPN.</span><span class="sxs-lookup"><span data-stu-id="fd89e-217">SPN.</span></span> <span data-ttu-id="fd89e-218">`host/myservice`와 같은 명시적 서비스 SPN이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-218">An explicit service SPN is returned, for example, `host/myservice`.</span></span>  
  
-   <span data-ttu-id="fd89e-219">UPN.</span><span class="sxs-lookup"><span data-stu-id="fd89e-219">UPN.</span></span> <span data-ttu-id="fd89e-220">서비스 계정의 UPN입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-220">The UPN of the service account.</span></span> <span data-ttu-id="fd89e-221">UPN은 형태로 `username` @ `domain`합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-221">The UPN is in the form `username`@`domain`.</span></span> <span data-ttu-id="fd89e-222">예를 들어, 서비스가 사용자 계정으로 실행 중인 경우 `username@contoso.com`일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-222">For example, when the service is running in a user account, it may be `username@contoso.com`.</span></span>  
  
 <span data-ttu-id="fd89e-223"><xref:System.ServiceModel.EndpointAddress.Identity%2A> 속성을 사용하여 ID를 프로그램 방식으로 지정하는 작업은 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-223">Specifying the identity programmatically (using the <xref:System.ServiceModel.EndpointAddress.Identity%2A> property) is optional.</span></span> <span data-ttu-id="fd89e-224">ID를 지정하지 않고 클라이언트 자격 증명 형식이 Windows인 경우 기본값은 "host/" 리터럴이 접두사로 붙은 서비스 끝점 주소의 호스트 이름 부분으로 값이 설정된 SPN입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-224">If no identity is specified, and the client credential type is Windows, the default is SPN with the value set to the hostname part of the service endpoint address prefixed with the "host/" literal.</span></span> <span data-ttu-id="fd89e-225">ID를 지정하지 않고 클라이언트 자격 증명 형식이 Certificate인 경우 기본값은 `Certificate`입니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-225">If no identity is specified, and the client credential type is a certificate, the default is `Certificate`.</span></span> <span data-ttu-id="fd89e-226">이 값은 메시지 수준 및 전송 수준 보안 모두에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-226">This applies to both message- and transport-level security.</span></span>  
  
## <a name="identity-and-custom-bindings"></a><span data-ttu-id="fd89e-227">ID 및 사용자 지정 바인딩</span><span class="sxs-lookup"><span data-stu-id="fd89e-227">Identity and Custom Bindings</span></span>  
 <span data-ttu-id="fd89e-228">서비스 ID는 사용하는 바인딩 형식에 따라 달라지기 때문에 사용자 지정 바인딩을 만들 때 적절한 ID가 노출되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-228">Because the identity of a service depends on the binding type used, ensure that an appropriate identity is exposed when creating a custom binding.</span></span> <span data-ttu-id="fd89e-229">예를 들어, 다음 코드 예제에서 보안 대화 부트스트랩 바인딩의 ID가 끝점의 바인딩 ID와 일치하지 않기 때문에 노출된 ID는 보안 형식과 호환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-229">For example, in the following code example, the identity exposed is not compatible with the security type, because the identity for the secure conversation bootstrap binding does not match the identity for the binding on the endpoint.</span></span> <span data-ttu-id="fd89e-230">보안 대화 바인딩은 DNS ID를 설정하는 반면 <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement>는 UPN 또는 SPN ID를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-230">The secure conversation binding sets the DNS identity, while the <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> sets the UPN or SPN identity.</span></span>  
  
 [!code-csharp[C_Identity#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#8)]
 [!code-vb[C_Identity#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#8)]  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)] <span data-ttu-id="fd89e-231">바인딩 요소의 사용자 지정 바인딩에 대 한 올바르게 스택를 참조 하는 방법 [Creating User-Defined 바인딩](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-231">how to stack binding elements correctly for a custom binding, see [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="fd89e-232"> 으로 사용자 지정 바인딩을 만들기는 <xref:System.ServiceModel.Channels.SecurityBindingElement>, 참조 [하는 방법: 지정 된 인증 모드에 대 한 SecurityBindingElement 만들기](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fd89e-232"> creating a custom binding with the <xref:System.ServiceModel.Channels.SecurityBindingElement>, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fd89e-233">참고 항목</span><span class="sxs-lookup"><span data-stu-id="fd89e-233">See Also</span></span>  
 [<span data-ttu-id="fd89e-234">방법: SecurityBindingElement를 사용하여 사용자 지정 바인딩 만들기</span><span class="sxs-lookup"><span data-stu-id="fd89e-234">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)  
 [<span data-ttu-id="fd89e-235">방법: 지정된 인증 모드에 대한 SecurityBindingElement 만들기</span><span class="sxs-lookup"><span data-stu-id="fd89e-235">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)  
 [<span data-ttu-id="fd89e-236">방법: 사용자 지정 클라이언트 ID 검증 도구 만들기</span><span class="sxs-lookup"><span data-stu-id="fd89e-236">How to: Create a Custom Client Identity Verifier</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-client-identity-verifier.md)  
 [<span data-ttu-id="fd89e-237">자격 증명 형식 선택</span><span class="sxs-lookup"><span data-stu-id="fd89e-237">Selecting a Credential Type</span></span>](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md)  
 [<span data-ttu-id="fd89e-238">인증서 작업</span><span class="sxs-lookup"><span data-stu-id="fd89e-238">Working with Certificates</span></span>](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)  
 [<span data-ttu-id="fd89e-239">ServiceModel Metadata 유틸리티 도구(Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="fd89e-239">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)  
 [<span data-ttu-id="fd89e-240">사용자 정의 바인딩 만들기</span><span class="sxs-lookup"><span data-stu-id="fd89e-240">Creating User-Defined Bindings</span></span>](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)  
 [<span data-ttu-id="fd89e-241">방법: 인증서의 지문 검색</span><span class="sxs-lookup"><span data-stu-id="fd89e-241">How to: Retrieve the Thumbprint of a Certificate</span></span>](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md)
