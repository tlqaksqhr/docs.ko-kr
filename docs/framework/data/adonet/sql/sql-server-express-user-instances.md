---
title: "SQL Server Express 사용자 인스턴스"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
ms.assetid: 00c12376-cb26-4317-86ad-e6e9c089be57
caps.latest.revision: "5"
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.workload: dotnet
ms.openlocfilehash: 9cd5dc57a9e7d164ec7ca1ebcc1e6d2cc2a5a6cd
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/22/2017
---
# <a name="sql-server-express-user-instances"></a><span data-ttu-id="0f263-102">SQL Server Express 사용자 인스턴스</span><span class="sxs-lookup"><span data-stu-id="0f263-102">SQL Server Express User Instances</span></span>
<span data-ttu-id="0f263-103">Microsoft SQL Server Express Edition(SQL Server Express)은 .NET Framework Data Provider for SQL Server(`SqlClient`)를 사용하는 경우에만 사용 가능한 기능인 사용자 인스턴스를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-103">Microsoft SQL Server Express Edition (SQL Server Express) supports the user instance feature, which is only available when using the .NET Framework Data Provider for SQL Server (`SqlClient`).</span></span> <span data-ttu-id="0f263-104">사용자 인스턴스는 부모 인스턴스에서 생성된 별도의 SQL Server Express 데이터베이스 엔진 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-104">A user instance is a separate instance of the SQL Server Express Database Engine that is generated by a parent instance.</span></span> <span data-ttu-id="0f263-105">로컬 컴퓨터에서 관리자가 아닌 사용자는 사용자 인스턴스를 사용하여 SQL Server Express 데이터베이스에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-105">User instances allow users who are not administrators on their local computers to attach and connect to SQL Server Express databases.</span></span> <span data-ttu-id="0f263-106">각 인스턴스는 사용자당 하나의 인스턴스를 기준으로 개인 사용자의 보안 컨텍스트 내에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-106">Each instance runs under the security context of the individual user, on a one-instance-per-user basis.</span></span>  
  
## <a name="user-instance-capabilities"></a><span data-ttu-id="0f263-107">사용자 인스턴스 기능</span><span class="sxs-lookup"><span data-stu-id="0f263-107">User Instance Capabilities</span></span>  
 <span data-ttu-id="0f263-108">각 사용자는 Windows 관리자로 실행할 필요 없이 컴퓨터에서 실행되는 인스턴스에 대해 SQL Server 시스템 관리자(`sysadmin`) 권한을 가지므로, 사용자 인스턴스는 LUA(최소 권한 사용자 계정)에서 Windows를 실행하는 사용자에게 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-108">User instances are useful for users who are running Windows under a least-privilege user account (LUA) because each user has SQL Server system administrator (`sysadmin`) privileges over the instance running on her computer without needing to run as a Windows administrator as well.</span></span> <span data-ttu-id="0f263-109">SQL Server Express의 인스턴스는 서비스가 아닌 사용자의 Windows 비관리자 계정에서 실행되므로 제한된 권한으로 사용자 인스턴스에서 실행되는 소프트웨어는 시스템 차원의 변경을 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-109">Software executing on a user instance with limited permissions cannot make system-wide changes because the instance of SQL Server Express is running under the non-administrator Windows account of the user, not as a service.</span></span> <span data-ttu-id="0f263-110">각 사용자 인스턴스는 부모 인스턴스 및 동일한 컴퓨터에서 실행되는 다른 사용자 인스턴스로부터 격리됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-110">Each user instance is isolated from its parent instance and from any other user instances running on the same computer.</span></span> <span data-ttu-id="0f263-111">사용자 인스턴스에서 실행되는 데이터베이스는 단일 사용자 모드로만 열리므로 여러 사용자가 사용자 인스턴스에서 실행되는 데이터베이스에 연결할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-111">Databases running on a user instance are opened in single-user mode only, and it is not possible for multiple users to connect to databases running on a user instance.</span></span> <span data-ttu-id="0f263-112">사용자 인스턴스에서는 복제 및 분산 쿼리도 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-112">Replication and distributed queries are also disabled for user instances.</span></span>  
  
 <span data-ttu-id="0f263-113">자세한 내용은 SQL Server 온라인 설명서의 "사용자 인스턴스"를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0f263-113">For more information, see "User Instances" in SQL Server Books Online.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0f263-114">사용자 인스턴스는 컴퓨터에서 사용자가 이미 관리자이거나 데이터베이스 사용자가 여러 명인 경우 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-114">User instances are not needed for users who are already administrators on their own computers, or for scenarios involving multiple database users.</span></span>  
  
## <a name="enabling-user-instances"></a><span data-ttu-id="0f263-115">사용자 인스턴스 활성화</span><span class="sxs-lookup"><span data-stu-id="0f263-115">Enabling User Instances</span></span>  
 <span data-ttu-id="0f263-116">사용자 인스턴스를 생성하려면 SQL Server Express의 부모 인스턴스가 실행 중이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-116">To generate user instances, a parent instance of SQL Server Express must be running.</span></span> <span data-ttu-id="0f263-117">SQL Server Express 설치 되어 있고 명시적으로 사용 하도록 설정 하 또는 실행 하는 시스템 관리자가 사용 하지 않도록 설정 될 때 기본적으로 사용자 인스턴스가 사용 되는지는 **sp_configure** 부모 인스턴스의 시스템 저장 프로시저입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-117">User instances are enabled by default when SQL Server Express is installed, and they can be explicitly enabled or disabled by a system administrator executing the **sp_configure** system stored procedure on the parent instance.</span></span>  
  
```  
-- Enable user instances.  
sp_configure 'user instances enabled','1'   
  
-- Disable user instances.  
sp_configure 'user instances enabled','0'  
```  
  
 <span data-ttu-id="0f263-118">사용자 인스턴스의 네트워크 프로토콜은 명명된 로컬 파이프여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-118">The network protocol for user instances must be local Named Pipes.</span></span> <span data-ttu-id="0f263-119">사용자 인스턴스는 SQL Server의 원격 인스턴스로 시작될 수 없으며 SQL Server 로그인은 허용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-119">A user instance cannot be started on a remote instance of SQL Server, and SQL Server logins are not allowed.</span></span>  
  
## <a name="connecting-to-a-user-instance"></a><span data-ttu-id="0f263-120">사용자 인스턴스에 연결</span><span class="sxs-lookup"><span data-stu-id="0f263-120">Connecting to a User Instance</span></span>  
 <span data-ttu-id="0f263-121">`User Instance` 및 `AttachDBFilename` <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> 키워드를 사용는 <xref:System.Data.SqlClient.SqlConnection> 사용자 인스턴스에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-121">The `User Instance` and `AttachDBFilename`<xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> keywords allow a <xref:System.Data.SqlClient.SqlConnection> to connect to a user instance.</span></span> <span data-ttu-id="0f263-122">사용자 인스턴스는 <xref:System.Data.SqlClient.SqlConnectionStringBuilder>`UserInstance` 및 `AttachDBFilename` 속성에서도 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-122">User instances are also supported by the <xref:System.Data.SqlClient.SqlConnectionStringBuilder>`UserInstance` and `AttachDBFilename` properties.</span></span>  
  
 <span data-ttu-id="0f263-123">아래 표시된 샘플 연결 문자열을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0f263-123">Note the following about the sample connection string shown below:</span></span>  
  
-   <span data-ttu-id="0f263-124">`Data Source` 키워드는 사용자 인스턴스를 생성하는 SQL Server Express의 부모 인스턴스를 참조합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-124">The `Data Source` keyword refers to the parent instance of SQL Server Express that is generating the user instance.</span></span> <span data-ttu-id="0f263-125">기본 인스턴스는 .\sqlexpress입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-125">The default instance is .\sqlexpress.</span></span>  
  
-   <span data-ttu-id="0f263-126">`Integrated Security`이 `true`로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-126">`Integrated Security` is set to `true`.</span></span> <span data-ttu-id="0f263-127">사용자 인스턴스에 연결하려면 Windows 인증이 필요합니다. SQL Server 로그인은 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-127">To connect to a user instance, Windows Authentication is required; SQL Server logins are not supported.</span></span>  
  
-   <span data-ttu-id="0f263-128">`User Instance`가 `true`로 설정되면 사용자 인스턴스를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-128">The `User Instance` is set to `true`, which invokes a user instance.</span></span> <span data-ttu-id="0f263-129">기본값은 `false`입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-129">(The default is `false`.)</span></span>  
  
-   <span data-ttu-id="0f263-130">`AttachDbFileName` 연결 문자열 키워드를 사용하여 전체 경로 이름을 포함하는 기본 데이터베이스 파일(.mdf)에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-130">The `AttachDbFileName` connection string keyword is used to attach the primary database file (.mdf), which must include the full path name.</span></span> <span data-ttu-id="0f263-131">`AttachDbFileName`은 또한 <xref:System.Data.SqlClient.SqlConnection> 연결 문자열 내의 "확장 속성" 및 "초기 파일 이름" 키에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-131">`AttachDbFileName` also corresponds to the "extended properties" and "initial file name" keys within a <xref:System.Data.SqlClient.SqlConnection> connection string.</span></span>  
  
-   <span data-ttu-id="0f263-132">파이프 기호 안에 포함된 `|DataDirectory|` 대체 문자열은 연결을 여는 응용 프로그램의 데이터 디렉터리를 참조하며 .mdf 및 .ldf 데이터베이스 및 로그 파일의 위치를 나타내는 상대 경로를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-132">The `|DataDirectory|` substitution string enclosed in the pipe symbols refers to the data directory of the application opening the connection and provides a relative path indicating the location of the .mdf and .ldf database and log files.</span></span> <span data-ttu-id="0f263-133">이러한 파일의 위치를 찾으려면 파일에 대한 전체 경로를 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-133">If you want to locate these files elsewhere, you must provide the full path to the files.</span></span>  
  
```  
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;AttachDBFilename=|DataDirectory|\InstanceDB.mdf;  
Initial Catalog=InstanceDB;  
```  
  
> [!NOTE]
>  <span data-ttu-id="0f263-134"><xref:System.Data.SqlClient.SqlConnectionStringBuilder><xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> 및 <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> 속성을 사용하여 런타임에 연결 문자열을 빌드할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-134">You can also use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder><xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> and <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> properties to build a connection string at run time.</span></span>  
  
### <a name="using-the-124datadirectory124-substitution-string"></a><span data-ttu-id="0f263-135">사용 하는 &#124; DataDirectory &#124; 대체 문자열</span><span class="sxs-lookup"><span data-stu-id="0f263-135">Using the &#124;DataDirectory&#124; Substitution String</span></span>  
 <span data-ttu-id="0f263-136">ADO.NET 2.0에서는 `AttachDbFileName`(파이프 기호 안에 포함됨) 대체 문자열이 도입되어 `|DataDirectory|`이 확장되었습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-136">`AttachDbFileName` was extended in ADO.NET 2.0 with the introduction of the `|DataDirectory|` (enclosed in pipe symbols) substitution string.</span></span> <span data-ttu-id="0f263-137">`DataDirectory`는 `AttachDbFileName`과 함께 사용되어 데이터 파일의 상대 경로를 나타내기 때문에 개발자가 전체 경로를 지정할 필요 없이 데이터 소스의 상대 경로를 기반으로 연결 문자열을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-137">`DataDirectory` is used in conjunction with `AttachDbFileName` to indicate a relative path to a data file, allowing developers to create connection strings that are based on a relative path to the data source instead of being required to specify a full path.</span></span>  
  
 <span data-ttu-id="0f263-138">`DataDirectory`가 가리키는 실제 위치는 응용 프로그램 형식에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-138">The physical location that `DataDirectory` points to depends on the type of application.</span></span> <span data-ttu-id="0f263-139">이 예제에서 연결된 Northwind.mdf 파일은 응용 프로그램의 \app_data 폴더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-139">In this example, the Northwind.mdf file to be attached is located in the application's \app_data folder.</span></span>  
  
```  
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;  
AttachDBFilename=|DataDirectory|\app_data\Northwind.mdf;  
Initial Catalog=Northwind;  
```  
  
 <span data-ttu-id="0f263-140">`DataDirectory`가 사용된 경우 디렉터리 구조에서 결과 파일 경로는 대체 문자열이 가리키는 디렉터리보다 높습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-140">When `DataDirectory` is used, the resulting file path cannot be higher in the directory structure than the directory pointed to by the substitution string.</span></span> <span data-ttu-id="0f263-141">예를 들어, 완전히 확장된 `DataDirectory`가 C:\AppDirectory\app_data인 경우 c:\AppDirectory보다 낮으므로 위에 표시된 샘플 연결 문자열이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-141">For example, if the fully expanded `DataDirectory` is C:\AppDirectory\app_data, then the sample connection string shown above works because it is below c:\AppDirectory.</span></span> <span data-ttu-id="0f263-142">그러나 `DataDirectory`를 `|DataDirectory|\..\data`로 지정하려고 하면 \data가 \AppDirectory의 하위 디렉터리가 아니므로 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-142">However, attempting to specify `DataDirectory` as `|DataDirectory|\..\data` will result in an error because \data is not a subdirectory of \AppDirectory.</span></span>  
  
 <span data-ttu-id="0f263-143">연결 문자열에 형식이 적절하지 않은 대체 문자열이 있는 경우 <xref:System.ArgumentException>이 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-143">If the connection string has an improperly formatted substitution string, an <xref:System.ArgumentException> will be thrown.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0f263-144"><xref:System.Data.SqlClient>에서는 로컬 컴퓨터 파일 시스템에 대해 대체 문자열을 전체 경로로 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-144"><xref:System.Data.SqlClient> resolves the substitution strings into full paths against the local computer file system.</span></span> <span data-ttu-id="0f263-145">따라서 원격 서버, HTTP 및 UNC 경로 이름은 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-145">Therefore, remote server, HTTP, and UNC path names are not supported.</span></span> <span data-ttu-id="0f263-146">서버가 로컬 컴퓨터에 없는 경우 연결이 열릴 때 예외가 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-146">An exception is thrown when the connection is opened if the server is not located on the local computer.</span></span>  
  
 <span data-ttu-id="0f263-147"><xref:System.Data.SqlClient.SqlConnection>이 열린 경우 기본 SQL Server Express 인스턴스로부터 호출자 계정에서 실행되는 런타임에 시작된 인스턴스로 리디렉션됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-147">When the <xref:System.Data.SqlClient.SqlConnection> is opened, it is redirected from the default SQL Server Express instance to a run-time initiated instance running under the caller's account.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0f263-148">사용자 인스턴스는 일반 인스턴스보다 로드하는 데 오랜 시간이 걸리기 때문에 <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> 값을 늘릴 필요가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-148">It may be necessary to increase the <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> value since user instances may take longer to load than regular instances.</span></span>  
  
 <span data-ttu-id="0f263-149">다음 코드 조각에서는 새 `SqlConnection`을 열어서 콘솔 창에 연결 문자열을 표시한 다음 `using` 코드 블록을 나갈 때 연결을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-149">The following code fragment opens a new `SqlConnection`, displays the connection string in the console window, and then closes the connection when exiting the `using` code block.</span></span>  
  
```vb  
Private Sub OpenSqlConnection()  
    ' Retrieve the connection string.  
    Dim connectionString As String = GetConnectionString()  
  
    Using connection As New SqlConnection(connectionString)  
        connection.Open()  
        Console.WriteLine("ConnectionString: {0}", _  
           connection.ConnectionString)  
    End Using  
End Sub  
```  
  
```csharp  
private static void OpenSqlConnection()  
{  
    // Retrieve the connection string.  
    string connectionString = GetConnectionString();  
  
    using (SqlConnection connection =   
        new SqlConnection(connectionString))  
    {  
        connection.Open();  
        Console.WriteLine("ConnectionString: {0}",   
             connection.ConnectionString);  
    }  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="0f263-150">SQL Server 내부에서 실행되는 CLR(공용 언어 런타임) 코드에서는 사용자 인스턴스가 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-150">User instances are not supported in common language runtime (CLR) code that is running inside of SQL Server.</span></span> <span data-ttu-id="0f263-151">연결 문자열에 <xref:System.InvalidOperationException>를 포함하는 `Open`에서 <xref:System.Data.SqlClient.SqlConnection>이 호출되는 경우 `User Instance=true`이 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-151">An <xref:System.InvalidOperationException> is thrown if `Open` is called on a <xref:System.Data.SqlClient.SqlConnection> that has `User Instance=true` in the connection string.</span></span>  
  
## <a name="lifetime-of-a-user-instance-connection"></a><span data-ttu-id="0f263-152">사용자 인스턴스 연결 수명</span><span class="sxs-lookup"><span data-stu-id="0f263-152">Lifetime of a User Instance Connection</span></span>  
 <span data-ttu-id="0f263-153">서비스로 실행되는 SQL Server 버전과 달리 SQL Server Express 인스턴스는 직접 시작하고 중지할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-153">Unlike versions of SQL Server that run as a service, SQL Server Express instances do not need to be manually started and stopped.</span></span> <span data-ttu-id="0f263-154">사용자가 사용자 인스턴스에 로그인하고 연결할 때 사용자 인스턴스가 이미 실행 중이 아닌 경우 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-154">Each time a user logs in and connects to a user instance, the user instance is started if it is not already running.</span></span> <span data-ttu-id="0f263-155">사용자 인스턴스 데이터베이스에는 `AutoClose` 옵션이 설정되어 있어서 일정 시간 동안 비활성 상태이면 데이터베이스가 자동으로 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-155">User instance databases have the `AutoClose` option set so that the database is automatically shut down after a period of inactivity.</span></span> <span data-ttu-id="0f263-156">시작된 sqlservr.exe 프로세스는 인스턴스에 대한 마지막 연결이 닫힌 후 제한된 시간 제한 기간 동안 계속해서 실행되므로, 시간 제한이 만료되기 전 다른 연결이 열려 있으면 프로세스를 다시 시작할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-156">The sqlservr.exe process that is started is kept running for a limited time-out period after the last connection to the instance is closed, so it does not need to be restarted if another connection is opened before the time-out has expired.</span></span> <span data-ttu-id="0f263-157">해당 시간 제한 기간이 만료되기 전에 새 연결이 열리지 않는 경우 사용자 인스턴스는 자동으로 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-157">The user instance automatically shuts down if no new connection opens before that time-out period has expired.</span></span> <span data-ttu-id="0f263-158">부모 인스턴스의 시스템 관리자를 사용 하 여 사용자 인스턴스에 대 한 제한 시간 기간을 설정할 수 **sp_configure** 변경 하는 **사용자 인스턴스 제한 시간** 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-158">A system administrator on the parent instance can set the duration of the time-out period for a user instance by using **sp_configure** to change the **user instance timeout** option.</span></span> <span data-ttu-id="0f263-159">기본값은 60분입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-159">The default is 60 minutes.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0f263-160">연결 문자열에서 0보다 큰 값이 `Min Pool Size`에 사용된 경우 연결 풀러에서는 항상 적은 수의 열린 연결을 유지하며 사용자 인스턴스는 자동으로 종료되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-160">If `Min Pool Size` is used in the connection string with a value greater than zero, the connection pooler will always maintain a few opened connections, and the user instance will not automatically shut down.</span></span>  
  
## <a name="how-user-instances-work"></a><span data-ttu-id="0f263-161">사용자 인스턴스 사용 방법</span><span class="sxs-lookup"><span data-stu-id="0f263-161">How User Instances Work</span></span>  
 <span data-ttu-id="0f263-162">처음으로 사용자 인스턴스가 각 사용자에 대해 생성 되는 **마스터** 및 **msdb** 사용자의 로컬 응용 프로그램 데이터 리포지토리 아래 경로에 시스템 데이터베이스가 Template Data 폴더에서 복사 됩니다 사용자 인스턴스가 배타적으로 사용에 대 한 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-162">The first time a user instance is generated for each user, the **master** and **msdb** system databases are copied from the Template Data folder to a path under the user's local application data repository directory for exclusive use by the user instance.</span></span> <span data-ttu-id="0f263-163">이 경로는 일반적으로 `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`입니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-163">This path is typically `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span></span> <span data-ttu-id="0f263-164">사용자 인스턴스가 시작 될 때는 **tempdb**, 로그 및 추적 파일은이 디렉터리에도 기록 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-164">When a user instance starts up, the **tempdb**, log, and trace files are also written to this directory.</span></span> <span data-ttu-id="0f263-165">인스턴스에 대해 각 사용자별로 고유한 이름이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-165">A name is generated for the instance, which is guaranteed to be unique for each user.</span></span>  
  
 <span data-ttu-id="0f263-166">기본적으로 Windows Builtin\Users 그룹의 모든 멤버에게는 로컬 인스턴스에 연결하는 권한뿐 아니라 SQL Server 이진 파일에 대한 읽기 및 실행 권한이 부여됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-166">By default all members of the Windows Builtin\Users group are granted permissions to connect on the local instance as well as read and execute permissions on the SQL Server binaries.</span></span> <span data-ttu-id="0f263-167">사용자 인스턴스를 호스트하는 호출 사용자의 자격 증명이 확인되면 해당 사용자는 해당 인스턴스에 대해 `sysadmin`이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-167">Once the credentials of the calling user hosting the user instance have been verified, that user becomes the `sysadmin` on that instance.</span></span> <span data-ttu-id="0f263-168">사용자 인스턴스에 대해 공유 메모리만 활성화되므로 로컬 컴퓨터에 대한 작업만 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-168">Only shared memory is enabled for user instances, which means that only operations on the local machine are possible.</span></span>  
  
 <span data-ttu-id="0f263-169">사용자에게는 연결 문자열에 지정된 .mdf 및 .ldf 파일에 대한 읽기 및 쓰기 권한이 모두 부여되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-169">Users must be granted both read and write permissions on the .mdf and .ldf files specified in the connection string.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0f263-170">.mdf 및 .ldf 파일은 각각 데이터베이스 및 로그 파일을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-170">The .mdf and .ldf files represent the database and log files, respectively.</span></span> <span data-ttu-id="0f263-171">이 두 파일은 서로 짝을 이루므로 백업 및 복원 작업을 하는 동안 같이 관리되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-171">These two files are a matched set, so care must be taken during backup and restore operations.</span></span> <span data-ttu-id="0f263-172">데이터베이스 파일에는 로그 파일의 정확한 버전 정보가 들어 있으며 데이터베이스 파일이 잘못된 로그 파일과 짝을 이루는 경우 데이터베이스가 열리지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-172">The database file contains information about the exact version of the log file, and the database will not open if it is coupled with the wrong log file.</span></span>  
  
 <span data-ttu-id="0f263-173">데이터 손상을 방지하려면 사용자 인스턴스의 데이터베이스를 배타적인 액세스 권한으로 엽니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-173">To avoid data corruption, a database in the user instance is opened with exclusive access.</span></span> <span data-ttu-id="0f263-174">서로 다른 두 개의 사용자 인스턴스가 동일한 컴퓨터에서 동일한 데이터베이스를 공유하는 경우 첫 번째 인스턴스에서 데이터베이스를 닫은 다음 두 번째 인스턴스에서 열어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-174">If two different user instances share the same database on the same computer, the user on the first instance must close the database before it can be opened in a second instance.</span></span>  
  
## <a name="user-instance-scenarios"></a><span data-ttu-id="0f263-175">사용자 인스턴스 시나리오</span><span class="sxs-lookup"><span data-stu-id="0f263-175">User Instance Scenarios</span></span>  
 <span data-ttu-id="0f263-176">사용자 인스턴스는 개발 컴퓨터에 관리자 계정을 가진 개발자에게 종속되지 않는 SQL Server 데이터 저장소를 데이터베이스 응용 프로그램 개발자에게 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-176">User instances provide developers of database applications with a SQL Server data store that does not depend on developers having administrative accounts on their development computers.</span></span> <span data-ttu-id="0f263-177">사용자 인스턴스는 Access/Jet 모델에 기반을 두고 있으므로 데이터베이스 응용 프로그램에서는 파일에 연결하기만 하며 권한을 부여하는 시스템 관리자의 개입 없이 사용자가 자동으로 모든 데이터베이스 개체에 대한 전체 권한을 가집니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-177">User instances are based on the Access/Jet model, where the database application simply connects to a file, and the user automatically has full permissions on all of the database objects without needing the intervention of a system administrator to grant permissions.</span></span> <span data-ttu-id="0f263-178">사용자가 LUA(최소 권한 사용자 계정)에서 실행되어 서버 또는 로컬 컴퓨터에 대한 관리 권한은 없지만 데이터베이스 개체 및 응용 프로그램을 만들어야 하는 환경에서 사용하면 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-178">It is intended to work in situations where the user is running under a least-privilege user account (LUA) and does not have administrative privileges on the server or local machine, yet needs to create database objects and applications.</span></span> <span data-ttu-id="0f263-179">사용자는 사용자 인스턴스를 사용하여 보다 권한이 많은 시스템 서비스의 보안 컨텍스트 내가 아닌 사용자 고유의 보안 컨텍스트 내에서 실행되는 인스턴스를 런타임에 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-179">User instances allow users to create instances at run time that run under the user's own security context, and not in the security context of a more privileged system service.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0f263-180">사용자 인스턴스는 사용자 인스턴스를 사용하는 모든 응용 프로그램이 완전히 신뢰되는 시나리오에서 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-180">User instances should only be used in scenarios where all the applications using it are fully trusted.</span></span>  
  
 <span data-ttu-id="0f263-181">사용자 인스턴스 시나리오에는 다음과 같은 경우가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-181">User instance scenarios include:</span></span>  
  
-   <span data-ttu-id="0f263-182">공유 데이터가 필요하지 않은 단일 사용자 응용 프로그램.</span><span class="sxs-lookup"><span data-stu-id="0f263-182">Any single-user application where sharing data is not required.</span></span>  
  
-   <span data-ttu-id="0f263-183">ClickOnce 배포.</span><span class="sxs-lookup"><span data-stu-id="0f263-183">ClickOnce deployment.</span></span> <span data-ttu-id="0f263-184">.NET Framework 2.0 이상 및 SQL Server Express가 이미 대상 컴퓨터에 설치되어 있는 경우, ClickOnce 동작의 결과로 다운로드된 설치 패키지를 관리자가 아닌 사용자가 설치하여 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-184">If the .NET Framework 2.0 (or later) and SQL Server Express are already installed on the target computer, the installation package downloaded as a result of a ClickOnce action can be installed and used by non-administrator users.</span></span> <span data-ttu-id="0f263-185">SQL Server Express가 설치의 일부인 경우 관리자는 SQL Server Express를 설치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-185">Note that an administrator must install SQL Server Express if that is part of the setup.</span></span> <span data-ttu-id="0f263-186">자세한 내용은 참조 [ClickOnce 배포에 대 한 Windows Forms 응용 프로그램](http://msdn.microsoft.com/en-us/34d8c770-48f2-460c-8d67-4ea5684511df)합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-186">For more information, see [ClickOnce Deployment for Windows Forms Applications](http://msdn.microsoft.com/en-us/34d8c770-48f2-460c-8d67-4ea5684511df).</span></span>  
  
-   <span data-ttu-id="0f263-187">Windows 인증을 사용하는 전용 ASP.NET 호스팅.</span><span class="sxs-lookup"><span data-stu-id="0f263-187">Dedicated ASP.NET hosting using Windows Authentication.</span></span> <span data-ttu-id="0f263-188">단일 SQL Server Express 인스턴스를 인트라넷에 호스트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-188">A single SQL Server Express instance can be hosted on an intranet.</span></span> <span data-ttu-id="0f263-189">응용 프로그램에서는 가장이 아닌 ASPNET Windows 계정을 사용하여 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-189">The application connects using the ASPNET Windows account, not by using impersonation.</span></span> <span data-ttu-id="0f263-190">모든 응용 프로그램이 동일한 사용자 인스턴스를 공유하여 각 사용자에 대해 격리되지 않는 타사 또는 공유 호스팅 시나리오에서는 사용자 인스턴스를 사용하면 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0f263-190">User instances should not be used for third-party or shared hosting scenarios where all applications would share the same user instance and would no longer remain isolated from each other.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0f263-191">참고 항목</span><span class="sxs-lookup"><span data-stu-id="0f263-191">See Also</span></span>  
 [<span data-ttu-id="0f263-192">SQL Server 및 ADO.NET</span><span class="sxs-lookup"><span data-stu-id="0f263-192">SQL Server and ADO.NET</span></span>](../../../../../docs/framework/data/adonet/sql/index.md)  
 [<span data-ttu-id="0f263-193">연결 문자열</span><span class="sxs-lookup"><span data-stu-id="0f263-193">Connection Strings</span></span>](../../../../../docs/framework/data/adonet/connection-strings.md)  
 [<span data-ttu-id="0f263-194">데이터 소스에 연결</span><span class="sxs-lookup"><span data-stu-id="0f263-194">Connecting to a Data Source</span></span>](../../../../../docs/framework/data/adonet/connecting-to-a-data-source.md)  
 [<span data-ttu-id="0f263-195">ADO.NET 관리되는 공급자 및 데이터 집합 개발자 센터</span><span class="sxs-lookup"><span data-stu-id="0f263-195">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
