---
title: PNRP 캐시
ms.date: 03/30/2017
ms.assetid: 270068d9-1b6b-4eb9-9e14-e02326bb88df
author: mcleblanc
ms.author: markl
manager: markl
ms.openlocfilehash: dfa7da476bd56b34d3fcb7b7e0f3bcc33fee032b
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/04/2018
---
# <a name="pnrp-caches"></a><span data-ttu-id="85f28-102">PNRP 캐시</span><span class="sxs-lookup"><span data-stu-id="85f28-102">PNRP Caches</span></span>
<span data-ttu-id="85f28-103">PNRP(피어 이름 확인 프로토콜) 캐시는 한 피어에서 유지 관리되며 알고리즘 방식으로 선택된 피어 끝점의 로컬 컬렉션입니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-103">Peer Name Resolution Protocol (PNRP) caches are local collections of algorithmically selected peer endpoints maintained on the peer.</span></span>  
  
## <a name="pnrp-cache-initialization"></a><span data-ttu-id="85f28-104">PNRP 캐시 초기화</span><span class="sxs-lookup"><span data-stu-id="85f28-104">PNRP Cache Initialization</span></span>  
 <span data-ttu-id="85f28-105">PNRP 캐시 또는 Peer Name Reord Collection을 초기화하려면 피어 노드가 시작될 때 노드에서 다음 메서드를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-105">To initialize the PNRP cache, or Peer Name Record Collection, when a peer node starts up, a node can use the following methods:</span></span>  
  
-   <span data-ttu-id="85f28-106">노드가 종료될 때 캐시에 포함되어 있던 영구적 캐시 항목은 하드 디스크 저장소에서 로드됩니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-106">Persistent cache entries that were present when the node was shut down are loaded from hard disk storage.</span></span>  
  
-   <span data-ttu-id="85f28-107">응용 프로그램에서 P2P 공동 작업 인프라를 사용하는 경우 공동 작업 정보는 해당 노드의 연락처 관리자에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-107">If an application uses the P2P collaboration infrastructure, collaboration information is available in the Contact Manager for that node.</span></span>  
  
## <a name="scaling-peer-name-resolution-with-a-multi-level-cache"></a><span data-ttu-id="85f28-108">다중 수준 캐시로 피어 이름 확인 확장</span><span class="sxs-lookup"><span data-stu-id="85f28-108">Scaling Peer Name Resolution with a Multi-Level Cache</span></span>  
 <span data-ttu-id="85f28-109">피어 노드에서는 PNRP 캐시의 크기를 작게 유지하기 위해 다중 수준 캐시를 사용합니다. 이러한 다중 수준 캐시의 각 수준에는 최대 개수의 항목이 들어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-109">To keep the sizes of the PNRP caches small, peer nodes use a multi-level cache, in which each level contains a maximum number of entries.</span></span> <span data-ttu-id="85f28-110">캐시의 각 수준은 PNRP ID 번호 공간(2<sup>256</sup>)의 1/10에 해당하는 부분을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-110">Each level in the cache represents a one tenth smaller portion of the PNRP ID number space (2<sup>256</sup>).</span></span> <span data-ttu-id="85f28-111">캐시의 최하위 수준에는 로컬로 등록된 PNRP ID와 수치상 해당 PNRP ID에 가까운 다른 PNRP ID가 들어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-111">The lowest level in the cache contains a locally registered PNRP ID and other PNRP IDs that are numerically close to it.</span></span> <span data-ttu-id="85f28-112">캐시의 특정 수준이 최대 항목 수인 20개의 항목으로 채워지면 새로운 하위 수준이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-112">As a level of the cache is filled with a maximum of 20 entries, a new lower level is created.</span></span> <span data-ttu-id="85f28-113">캐시에 생성될 수 있는 수준의 최대 수는 log10(클라우드의 총 PNRP ID 수)의 차수에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-113">The maximum number of levels in the cache is on the order of log10(Total number of PNRP IDs in the cloud).</span></span> <span data-ttu-id="85f28-114">예를 들어 PNRP ID가 1억개 포함된 글로벌 클라우드의 경우 캐시에 수준이 8개(=log10(100,000,000))까지만 생성될 수 있으며 이름 확인 작업을 수행하는 동안 PNRP ID를 확인하는 홉의 개수도 이와 비슷하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-114">For example, for a global cloud with 100 million PNRP IDs, there are no more than 8 (=log10(100,000,000)) levels in the cache and a similar number of hops to resolve a PNRP ID during name resolution.</span></span> <span data-ttu-id="85f28-115">이러한 메커니즘을 활용하면 해당 CPA가 있는 피어를 찾을 때까지 PNRP 요청 메시지를 다음으로 가까운 피어에 전달함으로써 임의 PNRP ID를 확인할 수 있는 분산된 해시 테이블을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-115">This mechanism allows for a distributed hash table for which an arbitrary PNRP ID can be resolved by forwarding PNRP Request messages to the next-closest peer until the peer with the corresponding CPA is found.</span></span>  
  
 <span data-ttu-id="85f28-116">항상 이름 확인이 가능하도록 하기 위해 노드에서는 캐시의 최하위 수준에 항목을 추가할 때마다 항목의 복사본을 캐시의 마지막 수준 내에 있는 모든 노드로 전파합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-116">To ensure that resolution can complete, each time a node adds an entry to the lowest level of its cache, it floods a copy of the entry to all the nodes within the last level of the cache.</span></span>  
  
 <span data-ttu-id="85f28-117">캐시 항목은 시간이 지남에 따라 새로 고쳐지고</span><span class="sxs-lookup"><span data-stu-id="85f28-117">The cache entries are refreshed over time.</span></span> <span data-ttu-id="85f28-118">오래된 항목은 캐시에서 제거됩니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-118">Cache entries that are stale are removed from the cache.</span></span> <span data-ttu-id="85f28-119">따라서 주소 레코드와 DNS 프로토콜에서 주소에 연결된 노드가 네트워크에서 작동 중인지 여부가 보장되지 않는 DNS와는 달리 PNRP ID의 분산된 해시 테이블은 현재 끝점을 기준으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-119">The result is that the distributed hash table of PNRP IDs is based on active endpoints, unlike DNS in which address records and the DNS protocol provide no guarantee that the node associated with the address is actively on the network.</span></span>  
  
## <a name="other-pnrp-caches"></a><span data-ttu-id="85f28-120">다른 PNRP 캐시</span><span class="sxs-lookup"><span data-stu-id="85f28-120">Other PNRP Caches</span></span>  
 <span data-ttu-id="85f28-121">또 다른 영구 데이터 저장소는 로컬 캐시입니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-121">Another persistent data store is the local cache.</span></span>  <span data-ttu-id="85f28-122">PNRP 활동에 필요한 다른 개체 외에도, 클라우드의 모든 멤버 간에 안전하게 게시 및 동기화되는 PNRP 클라우드 또는 공동 작업 세션과 연결된 레코드를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-122">In addition to the other objects needed for PNRP activity, it may include the records associated with a PNRP cloud or collaboration session that is securely published and synchronized between all the members of the cloud.</span></span> <span data-ttu-id="85f28-123">이 복제된 저장소는 그룹 데이터 보기를 나타내며, 모든 그룹 멤버에 대해 동일해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-123">This replicated store represents the view of the group data, which should be the same for all group members.</span></span> <span data-ttu-id="85f28-124">기술적으로 이러한 개체는 본질적으로 레코드가 아니라 로컬 캐시에 사용되는 개체 데이터, 현재 상태 및 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-124">Technically, these objects are not records per se, but rather application, presence, and object data destined for a local cache.</span></span> <span data-ttu-id="85f28-125">PNRP 클라우드를 사용하면 개체가 공동 작업 세션 또는 PNRP 클라우드의 모든 노드에 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-125">Use of the PNRP cloud ensures that objects are propagated to all nodes in the collaboration session or PNRP cloud.</span></span>  <span data-ttu-id="85f28-126">클라우드 멤버 간 레코드 복제에서는 암호화와 데이터 무결성을 제공하기 위해 SSL을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-126">Record replication between cloud members uses SSL to provide encryption and data integrity.</span></span>  
  
 <span data-ttu-id="85f28-127">피어가 클라우드에 조인할 때, 연결된 호스트 피어에서 자동으로 로컬 캐시 데이터를 받지 않습니다. 응용 프로그램, 현재 상태 및 개체 데이터의 업데이트를 받으려면 호스트 피어에 가입해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-127">When a peer joins a cloud, they do not automatically receive local cache data from the host peer to which they attach; they have to subscribe to the host peer to receive updates in application, presence, and object data.</span></span> <span data-ttu-id="85f28-128">모든 그룹 멤버에게 일관되게 동일한 보기가 표시되도록 초기 동기화 후에 피어에서 복제된 저장소를 정기적으로 다시 동기화합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-128">After the initial synchronization, peers periodically resynchronize their replicated stores to ensure that all group members consistently have the same view.</span></span>  <span data-ttu-id="85f28-129">공동 작업 세션 또는 공동 작업 세션의 응용 프로그램에서도 동일한 기능을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-129">The collaboration session or applications within the collaboration session may also perform the same function.</span></span>  
  
 <span data-ttu-id="85f28-130">클라우드의 공동 작업 세션이 시작되고 나면 응용 프로그램에서 피어를 등록하고 클라우드 범위를 통해 정의된 보안을 사용하여 정보 게시를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-130">After a collaboration session has begun for a cloud, applications can register peers and begin publishing their information using the security defined by the cloud scope.</span></span> <span data-ttu-id="85f28-131">피어가 클라우드에 조인하면 클라우드의 보안 메커니즘이 피어에 적용되므로, 참여할 범위를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-131">When a peer joins a cloud, the security mechanisms for the cloud are applied to the peer, giving it a scope in which to participate.</span></span>  <span data-ttu-id="85f28-132">그러면 클라우드의 범위에서 해당 레코드를 안전하게 게시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-132">Its records can then be published securely within the scope of the cloud.</span></span> <span data-ttu-id="85f28-133">클라우드 범위는 공동 작업 응용 프로그램 범위와 같을 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-133">Note that cloud scope may not be the same as collaboration application scope.</span></span>  
  
 <span data-ttu-id="85f28-134">피어는 다른 피어에서 개체를 받도록 등록할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-134">Peers can register interest in receiving objects from other peers.</span></span> <span data-ttu-id="85f28-135">개체를 업데이트하면, 공동 작업 응용 프로그램에 알림이 전달되고 새 개체가 응용 프로그램의 모든 구독자에게 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-135">When an object is updated, the collaboration application is notified and the new object is passed to all subscribers of the application.</span></span> <span data-ttu-id="85f28-136">예를 들어 그룹 채팅 응용 프로그램의 피어가 응용 프로그램 정보를 받기 위해 등록할 수 있습니다. 그러면 모든 채팅 레코드를 응용 프로그램 데이터로 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-136">For example, a peer in a group chat application can register interest in receiving application information, which will send it all chat records as application data.</span></span>  <span data-ttu-id="85f28-137">클라우드 내의 채팅 작업을 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="85f28-137">This allows it to monitor chat activity within the cloud.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="85f28-138">참고 항목</span><span class="sxs-lookup"><span data-stu-id="85f28-138">See Also</span></span>  
 <xref:System.Net.PeerToPeer>
