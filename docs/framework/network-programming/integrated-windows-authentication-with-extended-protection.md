---
title: "확장된 보호를 사용하는 Windows 통합 인증"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 81731998-d5e7-49e4-ad38-c8e6d01689d0
caps.latest.revision: "13"
author: mcleblanc
ms.author: markl
manager: markl
ms.workload: dotnet
ms.openlocfilehash: a453a2142ee8c3d1ab8d8d00e84e1ead60c46d91
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/22/2017
---
# <a name="integrated-windows-authentication-with-extended-protection"></a><span data-ttu-id="6a0b4-102">확장된 보호를 사용하는 Windows 통합 인증</span><span class="sxs-lookup"><span data-stu-id="6a0b4-102">Integrated Windows Authentication with Extended Protection</span></span>
<span data-ttu-id="6a0b4-103"><xref:System.Net.HttpWebRequest>, <xref:System.Net.HttpListener>, <xref:System.Net.Mail.SmtpClient>, <xref:System.Net.Security.SslStream>, <xref:System.Net.Security.NegotiateStream>, 그리고 <xref:System.Net> 및 관련 네임스페이스의 관련 클래스에 의해 Windows 통합 인증이 처리되는 방식에 영향을 미치는 기능이 향상되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-103">Enhancements were made that affect how integrated Windows authentication is handled by the <xref:System.Net.HttpWebRequest>, <xref:System.Net.HttpListener>, <xref:System.Net.Mail.SmtpClient>, <xref:System.Net.Security.SslStream>, <xref:System.Net.Security.NegotiateStream>, and related classes in the <xref:System.Net> and related namespaces.</span></span> <span data-ttu-id="6a0b4-104">보안을 강화하기 위한 확장된 보호에 대한 지원이 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-104">Support was added for extended protection to enhance security.</span></span>  
  
 <span data-ttu-id="6a0b4-105">이러한 변경 내용은 이러한 클래스를 사용하여 Windows 통합 인증이 사용되는 경우 웹 요청을 만들고 응답을 수신하는 응용 프로그램에 영향을 미칠 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-105">These changes can affect applications that use these classes to make web requests and receive responses where integrated Windows authentication is used.</span></span> <span data-ttu-id="6a0b4-106">이 변경 내용은 Windows 통합 인증을 사용하도록 구성된 웹 서버 및 클라이언트 응용 프로그램에 영향을 미칠 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-106">This change can also impact web servers and client applications that are configured to use integrated Windows authentication.</span></span>  
  
 <span data-ttu-id="6a0b4-107">이러한 변경 내용은 이러한 클래스를 사용하여 Windows 통합 인증이 사용되는 경우 다른 형식의 요청을 만들고 응답을 수신하는 응용 프로그램에 영향을 미칠 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-107">These changes can also affect applications that use these classes to make other types of requests and receive responses where integrated Windows authentication is used.</span></span>  
  
 <span data-ttu-id="6a0b4-108">확장된 보호를 지원하기 위한 변경 내용은 Windows 7 및 Windows Server 2008 R2의 응용 프로그램에만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-108">The changes to support extended protection are available only for applications on Windows 7 and Windows Server 2008 R2.</span></span> <span data-ttu-id="6a0b4-109">확장된 보호 기능은 이전 버전의 Windows에서 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-109">The extended protection features are not available on earlier versions of Windows.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="6a0b4-110">개요</span><span class="sxs-lookup"><span data-stu-id="6a0b4-110">Overview</span></span>  
 <span data-ttu-id="6a0b4-111">Windows 통합 인증의 디자인을 사용하면 일부 자격 증명 시도 응답이 유니버설이 될 수 있으므로 다시 사용되거나 전달될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-111">The design of integrated Windows authentication allows for some credential challenge responses to be universal, meaning they can be re-used or forwarded.</span></span> <span data-ttu-id="6a0b4-112">시도 응답은 대상 관련 정보를 사용하거나 오히려 일부 채널 관련 정보를 사용하여 최소한으로 생성되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-112">The challenge responses should be constructed at a minimum with target specific information and preferably also with some channel specific information.</span></span> <span data-ttu-id="6a0b4-113">그런 다음 서비스가 확장된 보호를 제공하여 자격 증명 시도 응답에 SPN(서비스 사용자 이름) 같은 서비스 관련 정보가 포함되어 있는지 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-113">Services can then provide extended protection to ensure that credential challenge responses contain service specific information such as a Service Principal Name (SPN).</span></span> <span data-ttu-id="6a0b4-114">자격 증명 교환에 이 정보가 포함되면 서비스는 부적절하게 사용되었을 수 있는 자격 증명 시도 응답의 악의적인 사용을 더 효과적으로 방지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-114">With this information in the credential exchanges, services are able to better protect against malicious use of credential challenge responses that might have been improperly used.</span></span>  
  
 <span data-ttu-id="6a0b4-115">확장된 보호 디자인은 인증 릴레이 공격을 완화하도록 디자인된 인증 프로토콜의 향상된 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-115">The extended protection design is an enhancement to authentication protocols designed to mitigate authentication relay attacks.</span></span> <span data-ttu-id="6a0b4-116">이 디자인은 채널 및 서비스 바인딩 정보의 개념을 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-116">It revolves around the concept of channel and service binding information.</span></span>  
  
 <span data-ttu-id="6a0b4-117">전체 목표는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-117">The overall objectives are the following:</span></span>  
  
1.  <span data-ttu-id="6a0b4-118">클라이언트가 확장된 보호를 지원하도록 업데이트된 경우 응용 프로그램은 모든 지원되는 인증 프로토콜에 채널 바인딩 및 서비스 바인딩 정보를 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-118">If the client is updated to support the extended protection, applications should supply a channel binding and service binding information to all supported authentication protocols.</span></span> <span data-ttu-id="6a0b4-119">바인딩할 채널(TLS)이 있는 경우 채널 바인딩 정보만 제공될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-119">Channel binding information can only be supplied when there is a channel (TLS) to bind to.</span></span> <span data-ttu-id="6a0b4-120">서비스 바인딩 정보는 항상 제공되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-120">Service binding information should always be supplied.</span></span>  
  
2.  <span data-ttu-id="6a0b4-121">제대로 구성된 업데이트된 서버는 클라이언트 인증 토큰 내에 있을 경우 채널 및 서비스 바인딩 정보를 확인하고 채널 바인딩이 일치하지 않을 경우 인증 시도를 거부할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-121">Updated servers which are properly configured may verify the channel and service binding information when it is present in the client authentication token and reject the authentication attempt if the channel bindings do not match.</span></span> <span data-ttu-id="6a0b4-122">배포 시나리오에 따라 서버는 채널 바인딩 또는 서비스 바인딩을 확인하거나 두 바인딩을 모두 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-122">Depending on the deployment scenario, servers may verify channel binding, service binding or both.</span></span>  
  
3.  <span data-ttu-id="6a0b4-123">업데이트된 서버에는 정책에 따라 채널 바인딩 정보가 포함되지 않은 하위 수준 클라이언트 요청을 허용하거나 거부할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-123">Updated servers have the ability to accept or reject down-level client requests that do not contain the channel binding information based on policy.</span></span>  
  
 <span data-ttu-id="6a0b4-124">확장된 보호에서 사용되는 정보는 다음 두 부분 중 하나 또는 두 개로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-124">Information used by extended protection consists of one or both of the following two parts:</span></span>  
  
1.  <span data-ttu-id="6a0b4-125">채널 바인딩 토큰 또는 CBT.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-125">A Channel Binding Token or CBT.</span></span>  
  
2.  <span data-ttu-id="6a0b4-126">SPN(서비스 사용자 이름) 형식의 서비스 바인딩 정보.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-126">Service Binding information in the form of a Service Principal Name or SPN.</span></span>  
  
 <span data-ttu-id="6a0b4-127">서비스 바인딩 정보는 특정 서비스 끝점에 대해 인증하고자 하는 클라이언트의 의도를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-127">Service Binding information is an indication of a client’s intent to authenticate to a particular service endpoint.</span></span> <span data-ttu-id="6a0b4-128">다음 속성을 사용하여 클라이언트에서 서버로 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-128">It is communicated from client to server with the following properties:</span></span>  
  
-   <span data-ttu-id="6a0b4-129">분명한 텍스트 형식으로 클라이언트 인증을 수행하는 서버에서 SPN 값을 사용할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-129">The SPN value must be available to the server performing client authentication in clear text form.</span></span>  
  
-   <span data-ttu-id="6a0b4-130">SPN 값은 공용입니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-130">The value of the SPN is public.</span></span>  
  
-   <span data-ttu-id="6a0b4-131">메시지 가로채기(man-in-the-middle) 공격이 값을 삽입, 제거 또는 수정할 수 없도록 SPN은 이동 중에 암호로 보호되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-131">The SPN must be cryptographically protected in transit such that a man-in-the-middle attack cannot insert, remove or modify its value.</span></span>  
  
 <span data-ttu-id="6a0b4-132">CBT는 내부 클라이언트 인증 채널을 통해 대화에 연결(바인딩)하는 데 사용되는 외부 보안 채널(예: TLS)의 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-132">A CBT is a property of the outer secure channel (such as TLS) used to tie (bind) it to a conversation over an inner, client-authenticated channel.</span></span> <span data-ttu-id="6a0b4-133">CBT에는 다음 속성이 있어야 합니다(IETF RFC 5056에서도 정의됨).</span><span class="sxs-lookup"><span data-stu-id="6a0b4-133">The CBT must have the following properties (also defined by IETF RFC 5056):</span></span>  
  
-   <span data-ttu-id="6a0b4-134">외부 채널이 있는 경우 CBT 값은 대화의 클라이언트 및 서버 쪽에서 개별적으로 도착하는 외부 채널 또는 서버 끝점을 식별하는 속성이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-134">When an outer channel exists, the value of the CBT must be a property identifying either the outer channel or the server endpoint, independently arrived at by both client and server sides of a conversation.</span></span>  
  
-   <span data-ttu-id="6a0b4-135">클라이언트에서 보낸 CBT의 값은 공격자가 영향을 미칠 수 있는 것이 아니어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-135">Value of the CBT sent by the client must not be something an attacker can influence.</span></span>  
  
-   <span data-ttu-id="6a0b4-136">CBT 값의 기밀성은 보장되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-136">No guarantees are made about secrecy of the CBT value.</span></span> <span data-ttu-id="6a0b4-137">그러나 이것은 서비스 바인딩 및 채널 바인딩 정보의 값이 항상 인증을 수행하는 서버를 제외한 다른 서버에서 검사될 수 있음을 의미하지 않습니다. CBT를 전달하는 프로토콜이 값을 암호화 중일 수 있기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-137">This does not however mean that the value of the service binding as well as channel binding information can always be examined by any other but the server performing authentication, as the protocol carrying the CBT may be encrypting it.</span></span>  
  
-   <span data-ttu-id="6a0b4-138">공격자가 값을 삽입, 제거 또는 수정할 수 없도록 CBT는 이동 중에 무결성이 암호로 보호되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-138">The CBT must be cryptographically integrity protected in transit such that an attacker cannot insert, remove or modify its value.</span></span>  
  
 <span data-ttu-id="6a0b4-139">채널 바인딩은 조작 방지 방식으로 SPN 및 CBT를 서버에 전송하는 클라이언트에서 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-139">Channel binding is accomplished by the client transferring the SPN and the CBT to the server in a tamperproof fashion.</span></span> <span data-ttu-id="6a0b4-140">서버는 정책에 따라 채널 바인딩 정보의 유효성을 검사하고 의도된 대상인지 확신할 수 없는 인증 시도를 거부합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-140">The server validates the channel binding information in accordance with its policy and rejects authentication attempts for which it does not believe itself to have been the intended target.</span></span> <span data-ttu-id="6a0b4-141">이 방식으로 두 개의 채널이 함께 암호로 바인딩됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-141">This way, the two channels become cryptographically bound together.</span></span>  
  
 <span data-ttu-id="6a0b4-142">기존 클라이언트 및 응용 프로그램과의 호환성을 유지하기 위해 아직 확장된 보호를 지원하지 않는 클라이언트의 인증 시도를 허용하도록 서버를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-142">To preserve compatibility with existing clients and applications, a server may be configured to allow authentication attempts by clients that do not yet support extended protection.</span></span> <span data-ttu-id="6a0b4-143">이것을 “완전 강화” 구성에 대비되는 “부분 강화” 구성이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-143">This is referred to as a "partially hardened" configuration, in contrast to a "fully hardened" configuration.</span></span>  
  
 <span data-ttu-id="6a0b4-144"><xref:System.Net> 및 <xref:System.Net.Security> 네임스페이스의 여러 구성 요소는 호출하는 응용 프로그램 대신 Windows 통합 인증을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-144">Multiple components in the <xref:System.Net> and <xref:System.Net.Security> namespaces perform integrated Windows authentication on behalf of a calling application.</span></span> <span data-ttu-id="6a0b4-145">이 섹션에서는 Windows 통합 인증 사용에 확장된 보호를 추가하기 위한 System.Net 구성 요소의 변경 내용을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-145">This section describes changes to System.Net components to add extended protection in their use of integrated Windows authentication.</span></span>  
  
 <span data-ttu-id="6a0b4-146">확장된 보호는 현재 Windows 7에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-146">Extended protection is currently supported on Windows 7.</span></span> <span data-ttu-id="6a0b4-147">응용 프로그램이 운영 체제에서 확장된 보호를 지원하는지 확인할 수 있는 메커니즘이 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-147">A mechanism is provided so an application can determine if the operating system supports extended protection.</span></span>  
  
## <a name="changes-to-support-extended-protection"></a><span data-ttu-id="6a0b4-148">확장된 보호를 지원하기 위한 변경 내용</span><span class="sxs-lookup"><span data-stu-id="6a0b4-148">Changes to Support Extended Protection</span></span>  
 <span data-ttu-id="6a0b4-149">Windows 통합 인증과 함께 사용되는 인증 프로세스는 일반적으로 사용되는 인증 프로토콜에 따라 대상 컴퓨터에서 실행되고 다시 클라이언트 컴퓨터로 전송되는 시도를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-149">The authentication process used with integrated Windows authentication, depending on the authentication protocol used, often includes a challenge issued by the destination computer and sent back to the client computer.</span></span> <span data-ttu-id="6a0b4-150">확장된 보호는 이 인증 프로세스에 새로운 기능을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-150">Extended protection adds new features to this authentication process</span></span>  
  
 <span data-ttu-id="6a0b4-151"><xref:System.Security.Authentication.ExtendedProtection> 네임스페이스는 응용 프로그램에 대해 확장된 보호를 사용하는 인증을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-151">The <xref:System.Security.Authentication.ExtendedProtection> namespace provides support for authentication using extended protection for applications.</span></span> <span data-ttu-id="6a0b4-152">이 네임스페이스의 <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> 클래스는 채널 바인딩을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-152">The <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> class in this namespace represents a channel binding.</span></span> <span data-ttu-id="6a0b4-153">이 네임스페이스의 <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> 클래스는 들어오는 클라이언트 연결을 확인하기 위해 서버에서 사용되는 확장된 보호 정책을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-153">The <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> class in this namespace represents the extended protection policy used by the server to validate incoming client connections.</span></span> <span data-ttu-id="6a0b4-154">기타 클래스 멤버는 확장된 보호와 함께 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-154">Other class members are used with extended protection.</span></span>  
  
 <span data-ttu-id="6a0b4-155">서버 응용 프로그램의 경우 이러한 클래스에는 다음이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-155">For server applications, these classes include the following:</span></span>  
  
 <span data-ttu-id="6a0b4-156">다음 요소가 포함된 <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy>:</span><span class="sxs-lookup"><span data-stu-id="6a0b4-156">A <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> that has the following elements:</span></span>  
  
-   <span data-ttu-id="6a0b4-157">운영 체제에서 확장된 보호를 사용하는 Windows 통합 인증을 지원하는지 여부를 나타내는 <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy.OSSupportsExtendedProtection%2A> 속성.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-157">An <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy.OSSupportsExtendedProtection%2A> property that indicates whether the operating system supports integrated windows authentication with extended protection.</span></span>  
  
-   <span data-ttu-id="6a0b4-158">확장된 보호 정책을 적용할 시기를 나타내는 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> 값입니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-158">A <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> value that indicates when the extended protection policy should be enforced.</span></span>  
  
-   <span data-ttu-id="6a0b4-159">배포 시나리오를 나타내는 <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> 값.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-159">A <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> value that indicates the deployment scenario.</span></span> <span data-ttu-id="6a0b4-160">이 값은 확장된 보호를 확인하는 방법에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-160">This influences how extended protection is checked.</span></span>  
  
-   <span data-ttu-id="6a0b4-161">인증의 의도된 대상인 클라이언트 제공 SPN과 일치하는지 확인하는 데 사용되는 사용자 지정 SPN 목록이 포함된 선택적 <xref:System.Security.Authentication.ExtendedProtection.ServiceNameCollection>.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-161">An optional <xref:System.Security.Authentication.ExtendedProtection.ServiceNameCollection> that contains the custom SPN list that is used to match against the SPN provided by the client as the intended target of the authentication.</span></span>  
  
-   <span data-ttu-id="6a0b4-162">유효성 검사에 사용할 사용자 지정 채널 바인딩이 포함된 선택적 <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding>.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-162">An optional <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> that contains a custom channel binding to use for validation.</span></span> <span data-ttu-id="6a0b4-163">이 시나리오는 일반적인 경우가 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-163">This scenario is not a common case</span></span>  
  
 <span data-ttu-id="6a0b4-164"><xref:System.Security.Authentication.ExtendedProtection.Configuration> 네임스페이스는 응용 프로그램의 확장된 보호를 사용하여 인증 구성을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-164">The <xref:System.Security.Authentication.ExtendedProtection.Configuration> namespace provides support for configuration of authentication using extended protection for applications.</span></span>  
  
 <span data-ttu-id="6a0b4-165">기존 <xref:System.Net> 네임스페이스에서 확장된 보호를 지원하기 위해 다양한 기능이 변경되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-165">A number of feature changes were made to support extended protection in the existing <xref:System.Net> namespace.</span></span> <span data-ttu-id="6a0b4-166">변경 내용은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-166">These changes include the following:</span></span>  
  
-   <span data-ttu-id="6a0b4-167"><xref:System.Net> 네임스페이스에 전송 컨텍스트를 나타내는 새로운 <xref:System.Net.TransportContext> 클래스가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-167">A new <xref:System.Net.TransportContext> class added to the <xref:System.Net> namespace that represents a transport context.</span></span>  
  
-   <span data-ttu-id="6a0b4-168">클라이언트 응용 프로그램에 대한 확장된 보호를 지원하기 위해 <xref:System.Net.TransportContext>를 검색할 수 있는 <xref:System.Net.HttpWebRequest> 클래스의 새로운 <xref:System.Net.HttpWebRequest.EndGetRequestStream%2A> 및 <xref:System.Net.HttpWebRequest.GetRequestStream%2A> 오버로드 메서드가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-168">New <xref:System.Net.HttpWebRequest.EndGetRequestStream%2A> and <xref:System.Net.HttpWebRequest.GetRequestStream%2A> overload methods in the <xref:System.Net.HttpWebRequest> class that allow retrieving the <xref:System.Net.TransportContext> to support extended protection for client applications.</span></span>  
  
-   <span data-ttu-id="6a0b4-169">서버 응용 프로그램을 지원하기 위해 <xref:System.Net.HttpListener> 및 <xref:System.Net.HttpListenerRequest> 클래스가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-169">Additions to the <xref:System.Net.HttpListener> and <xref:System.Net.HttpListenerRequest> classes to support server applications.</span></span>  
  
 <span data-ttu-id="6a0b4-170">기존 <xref:System.Net.Mail> 네임스페이스에서 SMTP 클라이언트 응용 프로그램에 대한 확장된 보호를 지원하기 위해 기능이 다음과 같이 변경되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-170">A feature change was made to support extended protection for SMTP client applications in the existing <xref:System.Net.Mail> namespace:</span></span>  
  
-   <span data-ttu-id="6a0b4-171">SMTP 클라이언트 응용 프로그램에 대한 확장된 보호를 사용할 때 인증에 사용할 SPN을 나타내는 <xref:System.Net.Mail.SmtpClient> 클래스의 <xref:System.Net.Mail.SmtpClient.TargetName%2A> 속성이 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-171">A <xref:System.Net.Mail.SmtpClient.TargetName%2A> property in the <xref:System.Net.Mail.SmtpClient> class that represents the SPN to use for authentication when using extended protection for SMTP client applications.</span></span>  
  
 <span data-ttu-id="6a0b4-172">기존 <xref:System.Net.Security> 네임스페이스에서 확장된 보호를 지원하기 위해 다양한 기능이 변경되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-172">A number of feature changes were made to support extended protection in the existing <xref:System.Net.Security> namespace.</span></span> <span data-ttu-id="6a0b4-173">변경 내용은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-173">These changes include the following:</span></span>  
  
-   <span data-ttu-id="6a0b4-174">클라이언트 응용 프로그램에 대한 확장된 보호를 지원하기 위해 CBT를 전달할 수 있는 <xref:System.Net.Security.NegotiateStream> 클래스의 새로운 <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsClient%2A> 및 <xref:System.Net.Security.NegotiateStream.AuthenticateAsClient%2A> 오버로드 메서드가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-174">New <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsClient%2A> and <xref:System.Net.Security.NegotiateStream.AuthenticateAsClient%2A> overload methods in the <xref:System.Net.Security.NegotiateStream> class that allow passing a CBT to support extended protection for client applications.</span></span>  
  
-   <span data-ttu-id="6a0b4-175">서버 응용 프로그램에 대한 확장된 보호를 지원하기 위해 <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy>를 전달할 수 있는 <xref:System.Net.Security.NegotiateStream> 클래스의 새로운 <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsServer%2A> 및 <xref:System.Net.Security.NegotiateStream.AuthenticateAsServer%2A> 오버로드 메서드가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-175">New <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsServer%2A> and <xref:System.Net.Security.NegotiateStream.AuthenticateAsServer%2A> overload methods in the <xref:System.Net.Security.NegotiateStream> class that allow passing an <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> to support extended protection for server applications.</span></span>  
  
-   <span data-ttu-id="6a0b4-176">클라이언트 및 서버 응용 프로그램에 대한 확장된 보호를 지원하기 위해 <xref:System.Net.Security.SslStream> 클래스의 새로운 <xref:System.Net.Security.SslStream.TransportContext%2A> 속성이 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-176">A new <xref:System.Net.Security.SslStream.TransportContext%2A> property in the <xref:System.Net.Security.SslStream> class to support extended protection for client and server applications.</span></span>  
  
 <span data-ttu-id="6a0b4-177"><xref:System.Net.Security> 네임스페이스에서 SMTP 클라이언트에 대한 확장된 보호 구성을 지원하기 위해 <xref:System.Net.Configuration.SmtpNetworkElement> 속성이 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-177">A <xref:System.Net.Configuration.SmtpNetworkElement> property was added to support configuration of extended protection for SMTP clients in the <xref:System.Net.Security> namespace.</span></span>  
  
## <a name="extended-protection-for-client-applications"></a><span data-ttu-id="6a0b4-178">클라이언트 응용 프로그램에 대한 확장된 보호</span><span class="sxs-lookup"><span data-stu-id="6a0b4-178">Extended Protection for Client Applications</span></span>  
 <span data-ttu-id="6a0b4-179">대부분의 클라이언트 응용 프로그램에 대한 확장된 보호는 자동으로 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-179">Extended protection support for most client applications happens automatically.</span></span> <span data-ttu-id="6a0b4-180">Windows의 기본 버전이 확장된 보호를 지원하면 <xref:System.Net.HttpWebRequest> 및 <xref:System.Net.Mail.SmtpClient> 클래스는 항상 확장된 보호를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-180">The <xref:System.Net.HttpWebRequest> and <xref:System.Net.Mail.SmtpClient> classes support extended protection whenever the underlying version of Windows supports extended protection.</span></span> <span data-ttu-id="6a0b4-181"><xref:System.Net.HttpWebRequest> 인스턴스는 <xref:System.Uri>에서 생성된 SPN을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-181">An <xref:System.Net.HttpWebRequest> instance sends an SPN constructed from the <xref:System.Uri>.</span></span> <span data-ttu-id="6a0b4-182">기본적으로 <xref:System.Net.Mail.SmtpClient> 인스턴스는 SMTP 메일 서버의 호스트 이름에서 생성된 SPN을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-182">By default, an <xref:System.Net.Mail.SmtpClient> instance sends an SPN constructed from the host name of the SMTP mail server.</span></span>  
  
 <span data-ttu-id="6a0b4-183">사용자 지정 인증의 경우 클라이언트 응용 프로그램은 <xref:System.Net.TransportContext.GetChannelBinding%2A> 메서드를 통해 <xref:System.Net.TransportContext> 및 CBT를 검색할 수 있는 <xref:System.Net.HttpWebRequest> 클래스의 <xref:System.Net.HttpWebRequest.EndGetRequestStream%28System.IAsyncResult%2CSystem.Net.TransportContext%40%29?displayProperty=nameWithType> 또는 <xref:System.Net.HttpWebRequest.GetRequestStream%28System.Net.TransportContext%40%29?displayProperty=nameWithType> 메서드를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-183">For custom authentication, client applications can use the <xref:System.Net.HttpWebRequest.EndGetRequestStream%28System.IAsyncResult%2CSystem.Net.TransportContext%40%29?displayProperty=nameWithType> or <xref:System.Net.HttpWebRequest.GetRequestStream%28System.Net.TransportContext%40%29?displayProperty=nameWithType> methods in the <xref:System.Net.HttpWebRequest> class that allow retrieving the <xref:System.Net.TransportContext> and the CBT using the <xref:System.Net.TransportContext.GetChannelBinding%2A> method.</span></span>  
  
 <span data-ttu-id="6a0b4-184"><xref:System.Net.HttpWebRequest> 인스턴스를 통해 지정된 서비스에 전송되는 Windows 통합 인증에 사용할 SPN은 <xref:System.Net.AuthenticationManager.CustomTargetNameDictionary%2A> 속성을 설정하여 재정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-184">The SPN to use for integrated Windows authentication sent by an <xref:System.Net.HttpWebRequest> instance to a given service can be overridden by setting the <xref:System.Net.AuthenticationManager.CustomTargetNameDictionary%2A> property.</span></span>  
  
 <span data-ttu-id="6a0b4-185"><xref:System.Net.Mail.SmtpClient.TargetName%2A> 속성을 통해 SMTP 연결에 대한 Windows 통합 인증에 사용할 사용자 지정 SPN을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-185">The <xref:System.Net.Mail.SmtpClient.TargetName%2A> property can be used to set a custom SPN to use for integrated Windows authentication for the SMTP connection.</span></span>  
  
## <a name="extended-protection-for-server-applications"></a><span data-ttu-id="6a0b4-186">서버 응용 프로그램에 대한 확장된 보호</span><span class="sxs-lookup"><span data-stu-id="6a0b4-186">Extended Protection for Server Applications</span></span>  
 <span data-ttu-id="6a0b4-187"><xref:System.Net.HttpListener>는 HTTP 인증을 수행할 때 서비스 바인딩의 유효성을 검사하기 위한 메커니즘을 자동으로 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-187"><xref:System.Net.HttpListener> automatically provides mechanisms for validating service bindings when performing HTTP authentication.</span></span>  
  
 <span data-ttu-id="6a0b4-188">가장 안전한 시나리오는 HTTPS:// 접두사에 대한 확장된 보호를 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-188">The most secure scenario is to enable extended protection for HTTPS:// prefixes.</span></span> <span data-ttu-id="6a0b4-189">이 경우 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement>를 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> 또는 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>로 설정하고 <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario>를 <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected>로 설정하여 <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType>를 <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy>로 설정합니다. <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> 값은 <xref:System.Net.HttpListener>를 부분 강화 모드로 전환하지만 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>는 완전 강화 모드에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-189">In this case, set <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType> to an <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> with <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> set to <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> or <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>, and <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> set to <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected> A value of  <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> puts <xref:System.Net.HttpListener> in partially hardened mode, while <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> corresponds to fully hardened mode.</span></span>  
  
 <span data-ttu-id="6a0b4-190">이 구성에서 외부 보안 채널을 통해 서버에 대한 요청을 만들 경우 외부 채널이 쿼리되어 채널 바인딩이 있는지 확인됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-190">In this configuration when a request is made to the server through an outer secure channel, the outer channel is queried for a channel binding.</span></span> <span data-ttu-id="6a0b4-191">이 채널 바인딩이 인증 SSPI 호출에 전달됩니다. 이 호출은 인증 Blob의 채널 바인딩이 일치하는지 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-191">This channel binding is passed to the authentication SSPI calls, which validate that the channel binding in the authentication blob matches.</span></span> <span data-ttu-id="6a0b4-192">세 가지 가능한 결과는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-192">There are three possible outcomes:</span></span>  
  
1.  <span data-ttu-id="6a0b4-193">서버의 기본 운영 체제가 확장된 보호를 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-193">The server’s underlying operating system does not support extended protection.</span></span> <span data-ttu-id="6a0b4-194">요청이 응용 프로그램에 노출되지 않고 권한 없는(401) 응답이 클라이언트에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-194">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="6a0b4-195">오류의 원인을 나타내는 메시지가 <xref:System.Net.HttpListener> 추적 소스에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-195">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
2.  <span data-ttu-id="6a0b4-196">SSPI 호출이 실패하고, 이것은 클라이언트가 외부 채널에서 검색되는 예상 값과 일치하지 않는 채널 바인딩을 지정했거나 클라이언트가 서버에 대한 확장된 보호 정책에 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>를 사용하도록 구성된 경우 채널 바인딩을 제공하지 못했음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-196">The SSPI call fails indicating that either the client specified a channel binding that did not match the expected value retrieved from the outer channel or the client failed to supply a channel binding when the extended protection policy on the server was configured for <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>.</span></span> <span data-ttu-id="6a0b4-197">두 경우에 모두 요청이 응용 프로그램에 노출되지 않고 권한 없는(401) 응답이 클라이언트에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-197">In both cases, the request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="6a0b4-198">오류의 원인을 나타내는 메시지가 <xref:System.Net.HttpListener> 추적 소스에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-198">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
3.  <span data-ttu-id="6a0b4-199">클라이언트는 올바른 채널 바인딩을 지정하거나, 서버에 대한 확장된 보호 정책이 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported>를 사용하여 구성되므로 채널 바인딩을 지정하지 않고 연결할 수 있습니다. 요청은 처리를 위해 응용 프로그램에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-199">The client specifies the correct channel binding or is allowed to connect without specifying a channel binding since the extended protection policy on the server is configured with <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> The request is returned to the application for processing.</span></span> <span data-ttu-id="6a0b4-200">서비스 이름 확인은 자동으로 수행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-200">No service name check is performed automatically.</span></span> <span data-ttu-id="6a0b4-201">응용 프로그램은 <xref:System.Net.HttpListenerRequest.ServiceName%2A> 속성을 사용하여 자체 서비스 이름 유효성 검사를 수행할 수 있지만 이러한 상황에서는 작업이 중복됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-201">An application may choose to perform its own service name validation using the <xref:System.Net.HttpListenerRequest.ServiceName%2A> property, but under these circumstances it is redundant.</span></span>  
  
 <span data-ttu-id="6a0b4-202">응용 프로그램이 HTTP 요청 본문 내에서 앞뒤로 전달되는 Blob을 기반으로 인증을 수행하도록 자체 SSPI를 호출하고 채널 바인딩을 지원하려고 할 경우 응용 프로그램은 <xref:System.Net.HttpListener>를 통해 외부 보안 채널에서 예상 채널 바인딩을 검색하여 네이티브 Win32 [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) 함수에 전달해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-202">If an application makes its own SSPI calls to perform authentication based on blobs passed back and forth within the body of an HTTP request and wishes to support channel binding, it needs to retrieve the expected channel binding from the outer secure channel using <xref:System.Net.HttpListener> in order to pass it to native Win32 [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) function.</span></span> <span data-ttu-id="6a0b4-203">이렇게 하려면 <xref:System.Net.HttpListenerRequest.TransportContext%2A> 속성을 사용하여 <xref:System.Net.TransportContext.GetChannelBinding%2A> 메서드를 호출하여 CBT를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-203">To do this, use the <xref:System.Net.HttpListenerRequest.TransportContext%2A> property and call <xref:System.Net.TransportContext.GetChannelBinding%2A> method to retrieve the CBT.</span></span> <span data-ttu-id="6a0b4-204">끝점 바인딩만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-204">Only endpoint bindings are supported.</span></span> <span data-ttu-id="6a0b4-205"><xref:System.Security.Authentication.ExtendedProtection.ChannelBindingKind.Endpoint> 이외의 다른 항목이 지정되면 <xref:System.NotSupportedException>이 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-205">If anything other <xref:System.Security.Authentication.ExtendedProtection.ChannelBindingKind.Endpoint> is specified, a <xref:System.NotSupportedException> will be thrown.</span></span> <span data-ttu-id="6a0b4-206">기본 운영 체제가 채널 바인딩을 지원하면 <xref:System.Net.TransportContext.GetChannelBinding%2A> 메서드는 `pInput` 매개 변수에 전달되는 SecBuffer 구조체의 pvBuffer 멤버로 [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) 함수에 전달하기에 적합한 채널 바인딩에 대한 포인터를 래핑하는 <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding><xref:System.Runtime.InteropServices.SafeHandle>을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-206">If the underlying operating system supports channel binding, the <xref:System.Net.TransportContext.GetChannelBinding%2A> method will return a <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding><xref:System.Runtime.InteropServices.SafeHandle> wrapping a pointer to a channel binding suitable for passing to [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) function as the pvBuffer member of a SecBuffer structure passed in the `pInput` parameter.</span></span> <span data-ttu-id="6a0b4-207"><xref:System.Security.Authentication.ExtendedProtection.ChannelBinding.Size%2A> 속성에는 채널 바인딩의 길이(바이트)가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-207">The <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding.Size%2A> property contains the length, in bytes, of the channel binding.</span></span> <span data-ttu-id="6a0b4-208">기본 운영 체제가 채널 바인딩을 지원하지 않으면 이 함수는 `null`을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-208">If the underlying operating system does not support channel bindings, the function will return `null`.</span></span>  
  
 <span data-ttu-id="6a0b4-209">또 다른 가능한 시나리오는 프록시가 사용되지 않을 경우 HTTP:// 접두사에 대한 확장된 보호를 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-209">Another possible scenario is to enable extended protection for HTTP:// prefixes when proxies are not used.</span></span> <span data-ttu-id="6a0b4-210">이 경우 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement>를 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> 또는 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>로 설정하고 <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario>를 <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected>로 설정하여 <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType>를 <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy>로 설정합니다. <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> 값은 <xref:System.Net.HttpListener>를 부분 강화 모드로 전환하지만 <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>는 완전 강화 모드에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-210">In this case, set <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType> to an <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> with <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> set to <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> or <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>, and <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> set to <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected> A value of  <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> puts <xref:System.Net.HttpListener> in partially hardened mode, while <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> corresponds to fully hardened mode.</span></span>  
  
 <span data-ttu-id="6a0b4-211">허용되는 서비스 이름의 기본 목록은 <xref:System.Net.HttpListener>를 사용하여 등록된 접두사를 기반으로 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-211">A default list of allowed service names is created based on the prefixes which have been registered with the <xref:System.Net.HttpListener>.</span></span> <span data-ttu-id="6a0b4-212">이 기본 목록은 <xref:System.Net.HttpListener.DefaultServiceNames%2A> 속성을 통해 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-212">This default list can be examined through the <xref:System.Net.HttpListener.DefaultServiceNames%2A> property.</span></span> <span data-ttu-id="6a0b4-213">이것은 포괄적인 목록이 아니므로 응용 프로그램은 <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> 클래스에 대한 생성자에서 기본 서비스 이름 목록 대신 사용할 사용자 지정 서비스 이름 컬렉션을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-213">If this list is not comprehensive, an application can specify a custom service name collection in the constructor for the <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> class which will be used instead of the default service name list.</span></span>  
  
 <span data-ttu-id="6a0b4-214">이 구성에서 외부 보안 채널을 사용하지 않고 서버에 대한 요청을 만들 경우 일반적으로 인증은 채널 바인딩 확인 없이 진행됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-214">In this configuration, when a request is made to the server without an outer secure channel authentication proceeds normally without a channel binding check.</span></span> <span data-ttu-id="6a0b4-215">인증에 성공하면 컨텍스트가 쿼리되어 클라이언트가 제공하고 허용 가능한 서비스 이름 목록에 대해 유효성 검사된 서비스 이름이 있는지 확인됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-215">If the authentication succeeds, the context is queried for the service name that the client provided and validated against the list of acceptable service names.</span></span> <span data-ttu-id="6a0b4-216">네 가지 가능한 결과는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-216">There are four possible outcomes:</span></span>  
  
1.  <span data-ttu-id="6a0b4-217">서버의 기본 운영 체제가 확장된 보호를 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-217">The server’s underlying operating system does not support extended protection.</span></span> <span data-ttu-id="6a0b4-218">요청이 응용 프로그램에 노출되지 않고 권한 없는(401) 응답이 클라이언트에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-218">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="6a0b4-219">오류의 원인을 나타내는 메시지가 <xref:System.Net.HttpListener> 추적 소스에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-219">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
2.  <span data-ttu-id="6a0b4-220">클라이언트의 기본 운영 체제가 확장된 보호를 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-220">The client’s underlying operating system does not support extended protection.</span></span> <span data-ttu-id="6a0b4-221"><xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> 구성에서 인증 시도가 성공하고 요청이 응용 프로그램에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-221">In the <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> configuration, the authentication attempt will succeed and the request will be returned to the application.</span></span> <span data-ttu-id="6a0b4-222"><xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> 구성에서 인증 시도가 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-222">In the <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> configuration, the authentication attempt will fail.</span></span> <span data-ttu-id="6a0b4-223">요청이 응용 프로그램에 노출되지 않고 권한 없는(401) 응답이 클라이언트에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-223">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="6a0b4-224">오류의 원인을 나타내는 메시지가 <xref:System.Net.HttpListener> 추적 소스에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-224">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
3.  <span data-ttu-id="6a0b4-225">클라이언트의 기본 운영 체제가 확장된 보호를 지원하지만 응용 프로그램이 서비스 바인딩을 지정하지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-225">The client’s underlying operating system supports extended protection, but the application did not specify a service binding.</span></span> <span data-ttu-id="6a0b4-226">요청이 응용 프로그램에 노출되지 않고 권한 없는(401) 응답이 클라이언트에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-226">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="6a0b4-227">오류의 원인을 나타내는 메시지가 <xref:System.Net.HttpListener> 추적 소스에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-227">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
4.  <span data-ttu-id="6a0b4-228">클라이언트가 서비스 바인딩을 지정했습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-228">The client specified a service binding.</span></span> <span data-ttu-id="6a0b4-229">서비스 바인딩은 허용되는 서비스 바인딩 목록에 비교됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-229">The service binding is compared to the list of allowed service bindings.</span></span> <span data-ttu-id="6a0b4-230">일치할 경우 요청이 응용 프로그램에 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-230">If it matches, the request is returned to the application.</span></span> <span data-ttu-id="6a0b4-231">일치하지 않을 경우 요청이 응용 프로그램에 노출되지 않고 권한 없는(401) 응답이 클라이언트에 자동으로 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-231">Otherwise, the request will not be exposed to the application, and an unauthorized (401) response will be automatically returned to the client.</span></span> <span data-ttu-id="6a0b4-232">오류의 원인을 나타내는 메시지가 <xref:System.Net.HttpListener> 추적 소스에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-232">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
 <span data-ttu-id="6a0b4-233">허용되는 서비스 이름 목록을 사용하는 이 간단한 방법으로 부족할 경우 응용 프로그램은 <xref:System.Net.HttpListenerRequest.ServiceName%2A> 속성을 쿼리하여 자체 서비스 이름 유효성 검사를 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-233">If this simple approach using an allowed list of acceptable service names is insufficient, an application may provide its own service name validation by querying the <xref:System.Net.HttpListenerRequest.ServiceName%2A> property.</span></span> <span data-ttu-id="6a0b4-234">위의 사례 1 및 2에서 속성은 `null`을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-234">In cases 1 and 2 above, the property will return `null`.</span></span> <span data-ttu-id="6a0b4-235">사례 3에서 속성은 빈 문자열을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-235">In case 3, it will return an empty string.</span></span> <span data-ttu-id="6a0b4-236">사례 4에서는 클라이언트에서 지정된 서비스 이름이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-236">In case 4, the service name specified by the client will be returned.</span></span>  
  
 <span data-ttu-id="6a0b4-237">이러한 확장된 보호 기능은 다른 요청 형식을 사용하여 인증할 경우 및 신뢰할 수 있는 프록시가 사용될 경우 서버 응용 프로그램에서 인증에 사용될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a0b4-237">These extended protection features can also be used by server applications for authentication with other types of requests and when trusted proxies are used.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6a0b4-238">참고 항목</span><span class="sxs-lookup"><span data-stu-id="6a0b4-238">See Also</span></span>  
 <xref:System.Security.Authentication.ExtendedProtection>  
 <xref:System.Security.Authentication.ExtendedProtection.Configuration>
