---
title: "연습: 데이터 흐름 파이프라인 만들기"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- dataflow pipelines, creating with TPL
- Task Parallel Library, dataflows
- TPL dataflow library, creating dataflow pipeline
ms.assetid: 69308f82-aa22-4ac5-833d-e748533b58e8
caps.latest.revision: "11"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: d63fb872382bfc0a3ba3b8637c7357ab65c58fbf
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/18/2017
---
# <a name="walkthrough-creating-a-dataflow-pipeline"></a><span data-ttu-id="88ee3-102">연습: 데이터 흐름 파이프라인 만들기</span><span class="sxs-lookup"><span data-stu-id="88ee3-102">Walkthrough: Creating a Dataflow Pipeline</span></span>
<span data-ttu-id="88ee3-103">사용할 수 있지만 <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, 및 <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> 소스 블록에서 메시지를 수신 하는 메서드, 형식으로 메시지 블록을 연결할 수도 있습니다는 *데이터 흐름 파이프라인*합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-103">Although you can use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> methods to receive messages from source blocks, you can also connect message blocks to form a *dataflow pipeline*.</span></span> <span data-ttu-id="88ee3-104">데이터 흐름 파이프라인은 일련의 구성 요소, 또는 *데이터 흐름 블록*, 각각 보다 큰 목표에 영향을 주는 특정 작업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-104">A dataflow pipeline is a series of components, or *dataflow blocks*, each of which performs a specific task that contributes to a larger goal.</span></span> <span data-ttu-id="88ee3-105">데이터 흐름 파이프라인의 모든 데이터 흐름 블록은 다른 데이터 흐름 블록에서 메시지를 받으면 작업을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-105">Every dataflow block in a dataflow pipeline performs work when it receives a message from another dataflow block.</span></span> <span data-ttu-id="88ee3-106">이는 자동차 제조 조립 라인에 비유될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-106">An analogy to this is an assembly line for automobile manufacturing.</span></span> <span data-ttu-id="88ee3-107">각 자동차가 조립 라인을 통과할 때 한 작업장에서는 프레임을 조립하고 다음 작업장에서는 엔진을 장착하는 식입니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-107">As each vehicle passes through the assembly line, one station assembles the frame, the next one installs the engine, and so on.</span></span> <span data-ttu-id="88ee3-108">조립 라인에서는 여러 대의 자동차를 동시에 조립할 수 있기 때문에 한 번에 자동차 전체를 조립하는 경우보다 처리량이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-108">Because an assembly line enables multiple vehicles to be assembled at the same time, it provides better throughput than assembling complete vehicles one at a time.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="88ee3-109">TPL 데이터 흐름 라이브러리(<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> 네임스페이스)는 [!INCLUDE[net_v45](../../../includes/net-v45-md.md)]와 함께 배포되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-109">The TPL Dataflow Library (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) is not distributed with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span></span> <span data-ttu-id="88ee3-110">설치 하는 <xref:System.Threading.Tasks.Dataflow> 네임 스페이스에서 프로젝트를 열고 [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], 선택 **NuGet 패키지 관리** 프로젝트 메뉴에 대 한 온라인 검색에서는 `Microsoft.Tpl.Dataflow` 패키지 합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-110">To install the <xref:System.Threading.Tasks.Dataflow> namespace, open your project in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], choose **Manage NuGet Packages** from the Project menu, and search online for the `Microsoft.Tpl.Dataflow` package.</span></span>  
  
 <span data-ttu-id="88ee3-111">이 문서에서는 책을 다운로드 하는 데이터 흐름 파이프라인을 보여 줍니다. *The Iliad Homer* 검색와 웹 사이트에서 개별 단어와 일치 하도록 텍스트 단어 그 반대로 첫 번째 단어의 문자입니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-111">This document demonstrates a dataflow pipeline that downloads the book *The Iliad of Homer* from a website and searches the text to match individual words with words that reverse the first word's characters.</span></span> <span data-ttu-id="88ee3-112">이 문서에서 데이터 흐름 파이프라인을 만드는 단계는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-112">The formation of the dataflow pipeline in this document consists of the following steps:</span></span>  
  
1.  <span data-ttu-id="88ee3-113">파이프라인에 참여하는 데이터 흐름 블록을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-113">Create the dataflow blocks that participate in the pipeline.</span></span>  
  
2.  <span data-ttu-id="88ee3-114">각 데이터 흐름 블록을 파이프라인의 다음 블록에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-114">Connect each dataflow block to the next block in the pipeline.</span></span> <span data-ttu-id="88ee3-115">각 블록은 파이프라인에 있는 이전 블록의 출력을 입력으로 받습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-115">Each block receives as input the output of the previous block in the pipeline.</span></span>  
  
3.  <span data-ttu-id="88ee3-116">각 데이터 흐름 블록에 대해 이전 블록이 완료된 후 다음 블록을 완료된 상태로 설정하는 연속 작업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-116">For each dataflow block, create a continuation task that sets the next block to the completed state after the previous block finishes.</span></span>  
  
4.  <span data-ttu-id="88ee3-117">데이터를 파이프라인의 머리에 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-117">Post data to the head of the pipeline.</span></span>  
  
5.  <span data-ttu-id="88ee3-118">파이프라인의 머리를 완료된 것으로 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-118">Mark the head of the pipeline as completed.</span></span>  
  
6.  <span data-ttu-id="88ee3-119">파이프라인에서 모든 작업을 완료할 때까지 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-119">Wait for the pipeline to complete all work.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="88ee3-120">필수 구성 요소</span><span class="sxs-lookup"><span data-stu-id="88ee3-120">Prerequisites</span></span>  
 <span data-ttu-id="88ee3-121">이 연습을 시작하기 전에 [데이터 흐름](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)을 읽어 보세요.</span><span class="sxs-lookup"><span data-stu-id="88ee3-121">Read [Dataflow](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) before you start this walkthrough.</span></span>  
  
## <a name="creating-a-console-application"></a><span data-ttu-id="88ee3-122">콘솔 응용 프로그램 만들기</span><span class="sxs-lookup"><span data-stu-id="88ee3-122">Creating a Console Application</span></span>  
 <span data-ttu-id="88ee3-123">[!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)]에서 [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] 또는 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] 콘솔 응용 프로그램 프로젝트를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-123">In [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], create a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] or [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] Console Application project.</span></span> <span data-ttu-id="88ee3-124">System.Threading.Tasks.Dataflow.dll에 대한 참조를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-124">Add a reference to System.Threading.Tasks.Dataflow.dll.</span></span>  
  
 <span data-ttu-id="88ee3-125">또는 파일을 만들고 이름을 `ReverseWords.cs` (`ReverseWords.vb` 에 대 한 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), 한 다음 프로젝트를 컴파일하려면 Visual Studio 명령 프롬프트 창에서 다음 명령을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-125">Alternatively, create a file and name it `ReverseWords.cs` (`ReverseWords.vb` for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), and then run the following command in a Visual Studio Command Prompt window to compile the project.</span></span>  
  
 [!INCLUDE[csprcs](../../../includes/csprcs-md.md)]  
  
 <span data-ttu-id="88ee3-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span><span class="sxs-lookup"><span data-stu-id="88ee3-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span></span>  
  
 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]  
  
 <span data-ttu-id="88ee3-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span><span class="sxs-lookup"><span data-stu-id="88ee3-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span></span>  
  
 <span data-ttu-id="88ee3-128">프로젝트에 다음 코드를 추가하여 기본 응용 프로그램을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-128">Add the following code to your project to create the basic application.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#2)]
 [!code-vb[TPLDataflow_Palindromes#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#2)]  
  
## <a name="creating-the-dataflow-blocks"></a><span data-ttu-id="88ee3-129">데이터 흐름 블록 만들기</span><span class="sxs-lookup"><span data-stu-id="88ee3-129">Creating the Dataflow Blocks</span></span>  
 <span data-ttu-id="88ee3-130">다음 코드를 `Main` 메서드에 추가하여 파이프라인에 참여하는 데이터 흐름 블록을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-130">Add the following code to the `Main` method to create the dataflow blocks that participate in the pipeline.</span></span> <span data-ttu-id="88ee3-131">다음 표에서는 파이프라인에 있는 각 구성원의 역할을 요약합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-131">The table that follows summarizes the role of each member of the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#3)]
 [!code-vb[TPLDataflow_Palindromes#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#3)]  
  
|<span data-ttu-id="88ee3-132">멤버</span><span class="sxs-lookup"><span data-stu-id="88ee3-132">Member</span></span>|<span data-ttu-id="88ee3-133">형식</span><span class="sxs-lookup"><span data-stu-id="88ee3-133">Type</span></span>|<span data-ttu-id="88ee3-134">설명</span><span class="sxs-lookup"><span data-stu-id="88ee3-134">Description</span></span>|  
|------------|----------|-----------------|  
|`downloadString`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="88ee3-135">웹에서 책 텍스트를 다운로드합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-135">Downloads the book text from the Web.</span></span>|  
|`createWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="88ee3-136">책 텍스트를 단어의 배열로 나눕니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-136">Separates the book text into an array of words.</span></span>|  
|`filterWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="88ee3-137">단어 배열에서 짧은 단어를 제거하고 생성된 단어를 사전순으로 정렬한 다음 중복 단어를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-137">Removes short words from the word array, orders the resulting words alphabetically, and remove duplicates.</span></span>|  
|`findReversedWords`|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<span data-ttu-id="88ee3-138">역순으로 표기된 단어도 단어 배열에 나타나는 모든 단어를 필터링된 단어 배열 컬렉션에서 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-138">Finds all words in the filtered word array collection whose reverse also occurs in the word array.</span></span>|  
|`printReversedWords`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="88ee3-139">단어 및 해당 역방향 단어를 콘솔에 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-139">Displays words and the corresponding reverse words to the console.</span></span>|  
  
 <span data-ttu-id="88ee3-140">이 예제에서 데이터 흐름 파이프라인의 여러 단계를 한 단계로 결합할 수도 있지만, 여기에서는 보다 큰 작업을 수행하기 위해 여러 독립적인 데이터 흐름 작업을 구성하는 개념을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-140">Although you could combine multiple steps in the dataflow pipeline in this example into one step, the example illustrates the concept of composing multiple independent dataflow tasks to perform a larger task.</span></span> <span data-ttu-id="88ee3-141">이 예제에서는 <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>을 사용하여 파이프라인의 각 구성원이 입력 데이터에 대해 작업을 수행하고 결과를 파이프라인의 다음 단계로 보낼 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-141">The example uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> to enable each member of the pipeline to perform an operation on its input data and send the results to the next step in the pipeline.</span></span> <span data-ttu-id="88ee3-142">파이프라인의 `findReversedWords` 구성원은 각 입력에 대해 여러 독립적 출력을 생성하기 때문에 <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-142">The `findReversedWords` member of the pipeline is a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object because it produces multiple independent outputs for each input.</span></span> <span data-ttu-id="88ee3-143">파이프라인의 꼬리인 `printReversedWords`은 입력에 대해 작업을 수행하고 결과를 생성하지 않기 때문에 <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-143">The tail of the pipeline, `printReversedWords`, is a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object because it performs an action on its input, and does not produce a result.</span></span>  
  
## <a name="forming-the-pipeline"></a><span data-ttu-id="88ee3-144">파이프라인 만들기</span><span class="sxs-lookup"><span data-stu-id="88ee3-144">Forming the Pipeline</span></span>  
 <span data-ttu-id="88ee3-145">다음 코드를 추가하여 각 블록을 파이프라인의 다음 블록에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-145">Add the following code to connect each block to the next block in the pipeline.</span></span>  
  
 <span data-ttu-id="88ee3-146"><xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> 메서드를 호출하여 소스 데이터 흐름 블록을 대상 데이터 흐름 블록에 연결하는 경우, 소스 데이터 흐름 블록은 데이터를 사용할 수 있게 되면 대상 블록에 데이터를 전파합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-146">When you call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method to connect a source dataflow block to a target dataflow block, the source dataflow block propagates data to the target block as data becomes available.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#4)]
 [!code-vb[TPLDataflow_Palindromes#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#4)]  
  
## <a name="creating-the-completion-tasks"></a><span data-ttu-id="88ee3-147">완료 작업 만들기</span><span class="sxs-lookup"><span data-stu-id="88ee3-147">Creating the Completion Tasks</span></span>  
 <span data-ttu-id="88ee3-148">다음 코드를 추가하여 각 데이터 흐름 블록이 모든 데이터를 처리한 후 최종 작업을 수행할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-148">Add the following code to enable each dataflow block to perform a final action after it processes all data.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#5)]
 [!code-vb[TPLDataflow_Palindromes#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#5)]  
  
 <span data-ttu-id="88ee3-149">파이프라인을 통해 완료를 전파하기 위해 각 완료 작업은 다음 데이터 흐름 블록을 완료된 상태로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-149">To propagate completion through the pipeline, each completion task sets the next dataflow block to the completed state.</span></span> <span data-ttu-id="88ee3-150">예를 들어 파이프라인의 머리가 완료된 상태로 설정된 경우 나머지 버퍼링된 메시지를 모두 처리한 다음 파이프라인의 두 번째 구성원을 완료된 상태로 설정하는 완료 작업을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-150">For example, when the head of the pipeline is set to the completed state, it processes any remaining buffered messages and then runs its completion task, which sets the second member of the pipeline to the completed state.</span></span> <span data-ttu-id="88ee3-151">그러면 파이프라인의 두 번째 구성원은 나머지 버퍼링된 메시지를 모두 처리한 다음 파이프라인의 세 번째 구성원을 완료된 상태로 설정하는 완료 작업을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-151">The second member of the pipeline in turn processes any remaining buffered messages and then runs its completion task, which sets the third member of the pipeline to the completed state.</span></span> <span data-ttu-id="88ee3-152">이 프로세스는 파이프라인의 모든 구성원이 완료될 때까지 계속됩니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-152">This process continues until all members of the pipeline finish.</span></span> <span data-ttu-id="88ee3-153">이 예제에서는 `delegate`(`Function`에서는 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) 키워드를 사용하여 연속 작업을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-153">This example uses the `delegate` keyword (`Function` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) to define the continuation tasks.</span></span>  
  
## <a name="posting-data-to-the-pipeline"></a><span data-ttu-id="88ee3-154">파이프라인에 데이터 게시</span><span class="sxs-lookup"><span data-stu-id="88ee3-154">Posting Data to the Pipeline</span></span>  
 <span data-ttu-id="88ee3-155">책의 URL을 게시 하려면 다음 코드를 추가 *The Iliad Homer* 데이터 흐름 파이프라인의 머리에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-155">Add the following code to post the URL of the book *The Iliad of Homer* to the head of the dataflow pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#6)]
 [!code-vb[TPLDataflow_Palindromes#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#6)]  
  
 <span data-ttu-id="88ee3-156">이 예제에서는 <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType>를 사용하여 파이프라인의 머리에 데이터를 동기적으로 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-156">This example uses <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> to synchronously send data to the head of the pipeline.</span></span> <span data-ttu-id="88ee3-157">데이터를 데이터 흐름 노드에 비동기적으로 보내야 하는 경우에는 <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> 메서드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-157">Use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> method when you must asynchronously send data to a dataflow node.</span></span>  
  
## <a name="completing-pipeline-activity"></a><span data-ttu-id="88ee3-158">파이프라인 작업 완료</span><span class="sxs-lookup"><span data-stu-id="88ee3-158">Completing Pipeline Activity</span></span>  
 <span data-ttu-id="88ee3-159">다음 코드를 추가하여 파이프라인의 머리를 완료된 것으로 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-159">Add the following code to mark the head of the pipeline as completed.</span></span> <span data-ttu-id="88ee3-160">파이프라인의 머리는 버퍼링된 메시지를 모두 처리한 후 연속 작업을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-160">The head of the pipeline runs its continuation task after it processes all buffered messages.</span></span> <span data-ttu-id="88ee3-161">이 연속 작업은 완료 상태를 파이프라인을 통해 전파합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-161">This continuation task propagates the completed state through the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#7)]
 [!code-vb[TPLDataflow_Palindromes#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#7)]  
  
 <span data-ttu-id="88ee3-162">이 예제에서는 처리할 URL을 데이터 흐름 파이프라인을 통해 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-162">This example sends one URL through the dataflow pipeline to be processed.</span></span> <span data-ttu-id="88ee3-163">파이프라인을 통해 둘 이상의 입력을 보내는 경우 모든 입력을 제출한 후 <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-163">If you send more than one input through a pipeline, call the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> method after you submit all the input.</span></span> <span data-ttu-id="88ee3-164">데이터를 더 이상 사용할 수 없는 지점이 응용 프로그램에 잘 정의되어 있지 않거나 파이프라인이 완료될 때까지 응용 프로그램이 대기할 필요가 없는 경우 이 단계를 생략할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-164">You can omit this step if your application has no well-defined point at which data is no longer available or the application does not have to wait for the pipeline to finish.</span></span>  
  
## <a name="waiting-for-the-pipeline-to-finish"></a><span data-ttu-id="88ee3-165">파이프라인이 완료될 때까지 대기</span><span class="sxs-lookup"><span data-stu-id="88ee3-165">Waiting for the Pipeline to Finish</span></span>  
 <span data-ttu-id="88ee3-166">다음 코드를 추가하여 파이프라인이 완료될 때까지 대기합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-166">Add the following code to wait for the pipeline to finish.</span></span> <span data-ttu-id="88ee3-167">이 예제에서는 연속 작업을 사용하여 파이프라인을 통해 완료를 전파하기 때문에 전체적인 작업은 파이프라인의 꼬리가 완료될 때 완료됩니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-167">Because this example uses continuation tasks to propagate completion through the pipeline, the overall operation is finished when the tail of the pipeline finishes.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#8)]
 [!code-vb[TPLDataflow_Palindromes#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#8)]  
  
 <span data-ttu-id="88ee3-168">동시에 임의의 스레드나 여러 스레드에서 데이터 흐름 완료를 기다릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-168">You can wait for dataflow completion from any thread or from multiple threads at the same time.</span></span>  
  
## <a name="the-complete-example"></a><span data-ttu-id="88ee3-169">전체 예제</span><span class="sxs-lookup"><span data-stu-id="88ee3-169">The Complete Example</span></span>  
 <span data-ttu-id="88ee3-170">다음 예제에서는 이 연습의 전체 코드를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-170">The following example shows the complete code for this walkthrough.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#1)]
 [!code-vb[TPLDataflow_Palindromes#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#1)]  
  
## <a name="next-steps"></a><span data-ttu-id="88ee3-171">다음 단계</span><span class="sxs-lookup"><span data-stu-id="88ee3-171">Next Steps</span></span>  
 <span data-ttu-id="88ee3-172">이 예제에서는 처리할 URL을 데이터 흐름 파이프라인을 통해 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-172">This example sends one URL to process through the dataflow pipeline.</span></span> <span data-ttu-id="88ee3-173">파이프라인을 통해 둘 이상의 입력 값을 보내는 경우, 부품들이 자동차 공장에서 이동할 수 있는 방법과 유사한 형태의 병렬 처리를 응용 프로그램에 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-173">If you send more than one input value through a pipeline, you can introduce a form of parallelism into your application that resembles how parts might move through an automobile factory.</span></span> <span data-ttu-id="88ee3-174">파이프라인의 첫 번째 구성원이 결과를 두 번째 구성원에 보내는 경우, 두 번째 구성원이 첫 번째 결과를 처리할 때 첫 번째 구성원은 다른 항목을 병렬로 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-174">When the first member of the pipeline sends its result to the second member, it can process another item in parallel as the second member processes the first result.</span></span>  
  
 <span data-ttu-id="88ee3-175">데이터 흐름 파이프라인을 사용 하 여 병렬 처리 라고 *정교 하지 않은 병렬 처리 수준* 하므로 더 적은 수의 보다 큰 작업 일반적으로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-175">The parallelism that is achieved by using dataflow pipelines is known as *coarse-grained parallelism* because it typically consists of fewer, larger tasks.</span></span> <span data-ttu-id="88ee3-176">더 많이 사용할 수도 있습니다 *세부적인 병렬 처리* 보다 작고 짧게 실행 되는 작업에 데이터 흐름 파이프라인의 합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-176">You can also use a more *fine-grained parallelism* of smaller, short-running tasks in a dataflow pipeline.</span></span> <span data-ttu-id="88ee3-177">이 예제에서 파이프라인의 `findReversedWords` 구성원은 <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> 메서드를 사용하여 작업 목록의 여러 항목을 병렬로 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-177">In this example, the `findReversedWords` member of the pipeline uses the <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> method to process multiple items in the work list in parallel.</span></span> <span data-ttu-id="88ee3-178">정교하지 않은 파이프라인에서 세분화된 병렬 처리를 사용하면 전반적인 처리량이 향상될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-178">The use of fine-grained parallelism in a coarse-grained pipeline can improve overall throughput.</span></span>  
  
 <span data-ttu-id="88ee3-179">만들려고 하는 여러 대상 블록에는 소스 데이터 흐름 블록을 연결할 수도 있습니다는 *데이터 흐름 네트워크*합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-179">You can also connect a source dataflow block to multiple target blocks to create a *dataflow network*.</span></span> <span data-ttu-id="88ee3-180"><xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> 메서드의 오버로드된 버전은 대상 블록이 값을 기준으로 각 메시지를 수락하는지 여부를 정의하는 <xref:System.Predicate%601> 개체를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-180">The overloaded version of the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method takes a <xref:System.Predicate%601> object that defines whether the target block accepts each message based on its value.</span></span> <span data-ttu-id="88ee3-181">소스 역할을 하는 대부분의 데이터 흐름 블록 형식은 블록 중 하나가 메시지를 수락할 때까지 연결된 모든 대상 블록에 연결순으로 메시지를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-181">Most dataflow block types that act as sources offer messages to all connected target blocks, in the order in which they were connected, until one of the blocks accepts that message.</span></span> <span data-ttu-id="88ee3-182">이 필터링 메커니즘을 사용하여 특정 데이터를 한 경로로 보내고 다른 데이터는 또 다른 경로로 보내는 연결된 데이터 흐름 블록의 시스템을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-182">By using this filtering mechanism, you can create systems of connected dataflow blocks that direct certain data through one path and other data through another path.</span></span> <span data-ttu-id="88ee3-183">데이터 흐름 네트워크를 만드는 필터링을 사용 하는 예제를 참조 하십시오. [연습: Windows Forms 응용 프로그램에서 사용 하 여 데이터 흐름](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="88ee3-183">For an example that uses filtering to create a dataflow network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="88ee3-184">참고 항목</span><span class="sxs-lookup"><span data-stu-id="88ee3-184">See Also</span></span>  
 [<span data-ttu-id="88ee3-185">데이터 흐름</span><span class="sxs-lookup"><span data-stu-id="88ee3-185">Dataflow</span></span>](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)
