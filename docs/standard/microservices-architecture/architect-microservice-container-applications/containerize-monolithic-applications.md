---
title: 모놀리식 응용 프로그램 컨테이너화
description: 컨테이너화된 .NET 응용 프로그램을 위한 .NET 마이크로 서비스 아키텍처 | 모놀리식 응용 프로그램 컨테이너화
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.openlocfilehash: 4e5b7a8202a0af26c8d61e315c3aa8f592ed45d9
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/29/2018
ms.locfileid: "37105925"
---
# <a name="containerizing-monolithic-applications"></a>모놀리식 응용 프로그램 컨테이너화

단일 모놀리식 배포 웹 응용 프로그램 또는 서비스를 빌드하고 컨테이너로 배포할 수 있습니다. 응용 프로그램 자체는 내부적으로 모놀리식이지만 여러 라이브러리, 구성 요소, 또는 계층(응용 프로그램 계층, 도메인 계층, 데이터 액세스 계층 등)으로 구성될 수 있습니다. 그러나 외부적으로는 단일 컨테이너(단일 프로세스, 단일 웹 응용 프로그램 또는 단일 서비스)입니다.

이 모델을 관리하려면 응용 프로그램을 나타내는 단일 컨테이너를 배포합니다. 강화하려면 부하 분산 장치 앞에 여러 복사본을 추가하면 됩니다. 단일 컨테이너 또는 VM에서 단일 배포를 관리하면 단순성을 제공합니다.

![](./media/image1.png)

**그림 4-1** 컨테이너화된 모놀리식 응용 프로그램의 아키텍처 예제

그림 4-1에서 보여준 대로 각 컨테이너에 여러 구성 요소, 라이브러리 또는 내부 계층이 포함될 수 있습니다. 하지만 이 모놀리식 패턴은 "컨테이너는 한 가지 작업을 하나의 프로세스에서 수행합니다."라는 컨테이너 원칙과 충돌할 수 있지만 어떤 경우에는 문제가 발생하지 않습니다.

이 방법의 단점은 응용 프로그램이 증가하면 분명히 크기를 조정해야 한다는 것입니다. 전체 응용 프로그램의 크기를 조정하는 경우 문제가 되지 않습니다. 그러나 대부분의 경우에 다른 구성 요소를 적게 사용하는 반면 일부 응용 프로그램은 크기 조정이 요구되는 문제 지점(choke points)에 있습니다.

예를 들어 많은 고객이 제품을 구입하지 않고 찾아보기 때문에 일반적인 전자 상거래 응용 프로그램에서는 제품 정보 하위 시스템의 크기를 조정해야 합니다. 많은 고객이 결제 파이프라인을 사용하지 않고 자신의 바구니를 사용합니다. 적은 수의 고객이 주석을 추가하거나 자신의 구매 기록을 봅니다. 또한 직원 중 소수가 콘텐츠 및 마케팅 캠페인을 관리해야 할 수 있습니다. 모놀리식 디자인을 크기를 조정하는 경우 이러한 다른 작업의 모든 코드는 여러 번 배포되고 동일한 등급으로 크기가 조정됩니다.

가로 복제, 응용 프로그램의 다양한 영역 분할 및 비즈니스 개념 또는 데이터와 유사한 분할 등 응용 프로그램의 크기를 조정하는 여러 가지 방법이 있습니다. 하지만 모든 구성 요소의 크기를 조정하는 문제 외에도 단일 구성 요소를 변경하려면 전체 응용 프로그램을 모두 다시 테스트하고 전체 인스턴스를 모두 다시 배포해야 합니다.

그러나 마이크로 서비스의 접근 방법보다 응용 프로그램 개발이 처음부터 쉽기 때문에 모놀리식 접근 방법이 일반적입니다. 따라서 대부분의 조직에서는 이 아키텍처 방법을 사용하여 개발합니다. 일부 조직의 결과는 훌륭한 반면 다른 조직은 한계에 도달했습니다. 수 년 전에는 도구 및 인프라가 SOA(서비스 지향 아키텍처)를 빌드하기 어려웠고 필요성을 느끼지 못했기 때문에 응용 프로그램이 개발될 때까지 대부분의 조직에서는 이 모델을 사용하여 응용 프로그램을 디자인했습니다.

인프라 측면에서 볼 때 각 서버는 동일한 호스트 내에서 많은 응용 프로그램을 실행하고 그림 4-2에 표시된 대로 리소스 사용량에서 효율성의 허용 가능한 비율을 사용할 수 있습니다.

![](./media/image2.png)

**그림 4-2** 모놀리식 방법: 호스트에서 실행 중인 여러 앱, 컨테이너로 실행되는 각 앱

Microsoft Azure의 모놀리식 응용 프로그램은 각 인스턴스에 전용 VM을 사용하여 배포될 수 있습니다. 또한 [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/)를 사용하여 VM의 크기를 쉽게 조정할 수 있습니다. [Azure App Service](https://azure.microsoft.com/services/app-service/)는 VM을 관리하지 않고 모놀리식 응용 프로그램을 실행하고 인스턴스의 크기를 쉽게 조정할 수 있습니다. 2016년부터 Azure App Services는 배포를 단순화할 뿐만 아니라 Docker 컨테이너의 단일 인스턴스를 실행할 수 있습니다.

그림 4-3에 표시된 대로 QA 환경 또는 제한된 프로덕션 환경으로 여러 Docker 호스트 VM을 배포하고 Azure 분산 장치를 사용하여 균형을 조정할 수 있습니다. 그러면 전체 응용 프로그램이 단일 컨테이너 내에 위치하기 때문에 조립(coarse-grain) 방법으로 크기를 조정하도록 관리할 수 있습니다.

![](./media/image3.png)

**그림 4-3** 단일 컨테이너 응용 프로그램의 크기를 조정하는 여러 호스트 예제

일반적인 배포 방법으로 다양한 호스트에 대한 배포를 관리할 수 있습니다. `docker run` 또는 `docker-compose`와 같은 명령을 사용하거나 또는 CD(지속적인 업데이트) 파이프라인과 같은 자동화를 통해 Docker 호스트를 수동으로 관리할 수 있습니다.

## <a name="deploying-a-monolithic-application-as-a-container"></a>컨테이너로 모놀리식 응용 프로그램 배포

단일 응용 프로그램 배포를 관리하기 위해 컨테이너를 사용하는 이점이 있습니다. 컨테이너 인스턴스의 크기를 확장하는 것은 추가 VM을 배포하는 것보다 훨씬 쉽고 빠릅니다. VM Scale Sets를 사용하더라도 VM을 시작하는 데 시간이 걸립니다. 이상적이지 않지만 컨테이너 대신 기존 응용 프로그램 인스턴스를 배포하는 경우 응용 프로그램의 구성은 VM의 일부로 관리됩니다.

Docker 이미지로 업데이트를 배포하는 것이 훨씬 더 빠르고 네트워크 효율적입니다. Docker 이미지는 일반적으로 몇 초 내에 시작됩니다. 그러면 롤아웃 속도가 향상됩니다. Docker 이미지 인스턴스를 중지하는 것은 `docker stop` 명령을 실행하는 것만큼 쉬우며 일반적으로 몇 초 내에 완료됩니다.

디자인에서 컨테이너를 변경할 수 없기 때문에 VM이 손상될 것을 걱정할 필요가 없습니다. 반면, VM의 업데이트 스크립트는 디스크에 남아 있는 몇 가지 특정 구성 또는 파일에서 고려되지 않을 수 있습니다.

모놀리식 응용 프로그램이 Docker를 활용할 때의 이점에 대해서만 다루었습니다. 컨테이너를 관리하는 추가 이점은 컨테이너 오케스트레이터를 사용하는 배포에서 제공됩니다. 그러면 다양한 인스턴스 및 각 컨테이너 인스턴스의 수명 주기를 관리합니다. 개별적으로 크기를 조정하고, 개발하고, 배포할 수 있는 하위 시스템으로 모놀리식 응용 프로그램을 나누는 작업은 마이크로 서비스 영역의 진입점입니다.

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a>Azure App Service에 단일 컨테이너 기반 응용 프로그램 게시

Azure에 배포된 컨테이너의 유효성 검사를 수행하거나 응용 프로그램이 단일 컨테이너 응용 프로그램인 경우 Azure App Service를 사용하여 확장성 있는 단일 컨테이너 기반 서비스를 제공하는 것이 좋습니다. Azure App Service를 사용하는 방법은 간단합니다. 를 통해 Git와 통합하여 코드를 사용하고, Visual Studio에서 빌드하고, Azure에 직접 배포하는 작업이 용이해집니다.

![](./media/image4.png)

**그림 4-4** Visual Studio에서 Azure App Service에 단일 컨테이너 응용 프로그램 게시

Docker 없이 Azure App Service에서 지원되지 않는 다른 기능, 프레임워크 또는 종속성이 필요한 경우 Azure 팀이 App Service에서 해당 종속성을 업데이트할 때까지 기다려야 했습니다. 또는 Azure Service Fabric, Azure Cloud Services 또는 VM과 같은 다른 서비스도 전환해야 했습니다. 여기서는 추가적으로 제어하고 응용 프로그램에 대한 필수 구성 요소 또는 프레임워크를 설치할 수 있습니다.

Visual Studio 2017의 컨테이너 지원은 그림 4-4에 표시된 대로 응용 프로그램 환경에서 원하는 작업이 무엇이든 포함할 수 있는 기능을 제공합니다. 이를 컨테이너에서 실행하므로 응용 프로그램에 종속성을 추가하는 경우 Dockerfile 또는 Docker 이미지에서 종속성을 포함할 수 있습니다.

또한 그림 4-4에 표시된 대로 게시 흐름은 컨테이너 레지스트리를 통해 이미지를 푸시합니다. Azure Container Registry(Azure에서 배포와 가깝고 Azure Active Directory 그룹 및 계정에 의해 보호되는 레지스트리) 또는 Docker 허브 또는 온-프레미스 레지스트리와 같은 다른 Docker 레지스트리일 수 있습니다.


>[!div class="step-by-step"]
[이전](index.md)
[다음](docker-application-state-data.md)
