---
title: APM(비동기 프로그래밍 모델)
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- ending asynchronous operations
- starting asynchronous operations
- beginning asynchronous operations
- asynchronous programming, ending operations
- asynchronous programming
- stopping asynchronous operations
- asynchronous programming, beginning operations
ms.assetid: c9b3501e-6bc6-40f9-8efd-4b6d9e39ccf0
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 992cc1f60ee3f08131b478d2336321bf87d7ef89
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33573791"
---
# <a name="asynchronous-programming-model-apm"></a><span data-ttu-id="6abb3-102">APM(비동기 프로그래밍 모델)</span><span class="sxs-lookup"><span data-stu-id="6abb3-102">Asynchronous Programming Model (APM)</span></span>
<span data-ttu-id="6abb3-103"><xref:System.IAsyncResult> 디자인 패턴을 사용하는 비동기 작업은 **Begin***OperationName*과 **End***OperationName*이라는 두 가지 메서드로 구현됩니다. 이 두 메서드를 사용하면 각각 비동기 작업 *OperationName*이 시작되고 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-103">An asynchronous operation that uses the <xref:System.IAsyncResult> design pattern is implemented as two methods named **Begin***OperationName* and **End***OperationName* that begin and end the asynchronous operation *OperationName* respectively.</span></span> <span data-ttu-id="6abb3-104">예를 들어 <xref:System.IO.FileStream> 클래스는 파일에서 바이트를 비동기적으로 읽는 <xref:System.IO.FileStream.BeginRead%2A> 및 <xref:System.IO.FileStream.EndRead%2A> 메서드를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-104">For example, the <xref:System.IO.FileStream> class provides the <xref:System.IO.FileStream.BeginRead%2A> and <xref:System.IO.FileStream.EndRead%2A> methods to asynchronously read bytes from a file.</span></span> <span data-ttu-id="6abb3-105">이러한 메서드는 비동기 버전의 <xref:System.IO.FileStream.Read%2A> 메서드를 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-105">These methods implement the asynchronous version of the <xref:System.IO.FileStream.Read%2A> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6abb3-106">.NET Framework 4부터는 작업 병렬 라이브러리에서 비동기 및 병렬 프로그래밍을 위한 새로운 모델을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-106">Starting with the .NET Framework 4, the Task Parallel Library provides a new model for asynchronous and parallel programming.</span></span> <span data-ttu-id="6abb3-107">자세한 내용은 [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) 및 [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6abb3-107">For more information, see [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) and [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).</span></span>  
  
 <span data-ttu-id="6abb3-108">**Begin***OperationName*을 호출한 후에는 비동기 작업이 다른 스레드에서 발생되는 동안 응용 프로그램에서 호출 스레드에 대한 명령을 계속 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-108">After calling **Begin***OperationName*, an application can continue executing instructions on the calling thread while the asynchronous operation takes place on a different thread.</span></span> <span data-ttu-id="6abb3-109">응용 프로그램에서 작업 결과를 확인하려면 **Begin***OperationName*을 호출할 때마다 **End***OperationName*도 호출해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-109">For each call to **Begin***OperationName*, the application should also call **End***OperationName* to get the results of the operation.</span></span>  
  
## <a name="beginning-an-asynchronous-operation"></a><span data-ttu-id="6abb3-110">비동기 작업 시작</span><span class="sxs-lookup"><span data-stu-id="6abb3-110">Beginning an Asynchronous Operation</span></span>  
 <span data-ttu-id="6abb3-111">**Begin***OperationName* 메서드로 비동기 작업 *OperationName*을 시작하고 <xref:System.IAsyncResult> 인터페이스를 구현하는 개체를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-111">The **Begin***OperationName* method begins asynchronous operation *OperationName* and returns an object that implements the <xref:System.IAsyncResult> interface.</span></span> <span data-ttu-id="6abb3-112"><xref:System.IAsyncResult> 개체는 비동기 작업에 대한 정보를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-112"><xref:System.IAsyncResult> objects store information about an asynchronous operation.</span></span> <span data-ttu-id="6abb3-113">다음 표에서는 비동기 작업에 대한 정보를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-113">The following table shows information about an asynchronous operation.</span></span>  
  
|<span data-ttu-id="6abb3-114">멤버</span><span class="sxs-lookup"><span data-stu-id="6abb3-114">Member</span></span>|<span data-ttu-id="6abb3-115">설명</span><span class="sxs-lookup"><span data-stu-id="6abb3-115">Description</span></span>|  
|------------|-----------------|  
|<xref:System.IAsyncResult.AsyncState%2A>|<span data-ttu-id="6abb3-116">비동기 작업에 대한 정보를 포함하는 응용 프로그램별 선택적 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-116">An optional application-specific object that contains information about the asynchronous operation.</span></span>|  
|<xref:System.IAsyncResult.AsyncWaitHandle%2A>|<span data-ttu-id="6abb3-117">비동기 작업이 완료될 때까지 응용 프로그램 실행을 차단하기 위해 사용할 수 있는 <xref:System.Threading.WaitHandle> 입니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-117">A <xref:System.Threading.WaitHandle> that can be used to block application execution until the asynchronous operation completes.</span></span>|  
|<xref:System.IAsyncResult.CompletedSynchronously%2A>|<span data-ttu-id="6abb3-118">비동기 작업이 별도의 <xref:System.Threading.ThreadPool> 스레드에서 완료되는 대신 **Begin***OperationName* 호출에 사용된 스레드에서 완료되었는지 여부를 나타내는 값입니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-118">A value that indicates whether the asynchronous operation completed on the thread used to call **Begin***OperationName* instead of completing on a separate <xref:System.Threading.ThreadPool> thread.</span></span>|  
|<xref:System.IAsyncResult.IsCompleted%2A>|<span data-ttu-id="6abb3-119">비동기 작업이 완료되었는지 여부를 나타내는 값입니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-119">A value that indicates whether the asynchronous operation has completed.</span></span>|  
  
 <span data-ttu-id="6abb3-120">**Begin***OperationName* 메서드에는 값 또는 참조로 전달되는 동기 버전의 메서드 서명에 선언된 매개 변수가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-120">A **Begin***OperationName* method takes any parameters declared in the signature of the synchronous version of the method that are passed by value or by reference.</span></span> <span data-ttu-id="6abb3-121">out 매개 변수는 **Begin***OperationName* 메서드 서명의 일부가 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-121">Any out parameters are not part of the **Begin***OperationName* method signature.</span></span> <span data-ttu-id="6abb3-122">**Begin***OperationName* 메서드 서명에는 두 개의 추가 매개 변수도 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-122">The **Begin***OperationName* method signature also includes two additional parameters.</span></span> <span data-ttu-id="6abb3-123">그중 첫 번째 매개 변수는 비동기 작업이 완료될 때 호출되는 메서드를 참조하는 <xref:System.AsyncCallback> 대리자를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-123">The first of these defines an <xref:System.AsyncCallback> delegate that references a method that is called when the asynchronous operation completes.</span></span> <span data-ttu-id="6abb3-124">호출자는 작업이 완료될 때 호출되는 메서드를 원하지 않는 경우 `null` (Visual Basic에서는`Nothing` )을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-124">The caller can specify `null` (`Nothing` in Visual Basic) if it does not want a method invoked when the operation completes.</span></span> <span data-ttu-id="6abb3-125">두 번째 추가 매개 변수는 사용자 정의 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-125">The second additional parameter is a user-defined object.</span></span> <span data-ttu-id="6abb3-126">이 개체를 사용하여 비동기 작업이 완료될 때 호출되는 메서드로 응용 프로그램별 상태 정보를 전달할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-126">This object can be used to pass application-specific state information to the method invoked when the asynchronous operation completes.</span></span> <span data-ttu-id="6abb3-127">파일에서 읽은 바이트를 저장하는 바이트 배열과 같이 **Begin***OperationName* 메서드에서 작업 관련 추가 매개 변수를 사용하는 경우 <xref:System.AsyncCallback> 및 응용 프로그램 상태 개체는 **Begin***OperationName* 메서드 서명의 마지막 매개 변수가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-127">If a **Begin***OperationName* method takes additional operation-specific parameters, such as a byte array to store bytes read from a file, the <xref:System.AsyncCallback> and application state object are the last parameters in the **Begin***OperationName* method signature.</span></span>  
  
 <span data-ttu-id="6abb3-128">**Begin***OperationName*은 호출 스레드에 대한 컨트롤을 즉시 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-128">**Begin***OperationName* returns control to the calling thread immediately.</span></span> <span data-ttu-id="6abb3-129">**Begin***OperationName* 메서드가 예외를 throw하면 이 예외는 이 비동기 작업이 시작되기 전에 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-129">If the **Begin***OperationName* method throws exceptions, the exceptions are thrown before the asynchronous operation is started.</span></span> <span data-ttu-id="6abb3-130">**Begin***OperationName* 메서드가 예외를 throw하면 콜백 메서드는 호출되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-130">If the **Begin***OperationName* method throws exceptions, the callback method is not invoked.</span></span>  
  
## <a name="ending-an-asynchronous-operation"></a><span data-ttu-id="6abb3-131">비동기 작업 끝내기</span><span class="sxs-lookup"><span data-stu-id="6abb3-131">Ending an Asynchronous Operation</span></span>  
 <span data-ttu-id="6abb3-132">**End***OperationName* 메서드는 비동기 작업 *OperationName*을 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-132">The **End***OperationName* method ends asynchronous operation *OperationName*.</span></span> <span data-ttu-id="6abb3-133">**End***OperationName* 메서드의 반환 값은 이에 상응하는 동기 항목의 반환 값과 같은 유형으로서 비동기 작업에 대해서만 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-133">The return value of the **End***OperationName* method is the same type returned by its synchronous counterpart and is specific to the asynchronous operation.</span></span> <span data-ttu-id="6abb3-134">예를 들어 <xref:System.IO.FileStream.EndRead%2A> 메서드는 <xref:System.IO.FileStream> 에서 읽은 바이트 수를 반환하고 <xref:System.Net.Dns.EndGetHostByName%2A> 메서드는 호스트 컴퓨터에 대한 정보를 포함하는 <xref:System.Net.IPHostEntry> 개체를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-134">For example, the <xref:System.IO.FileStream.EndRead%2A> method returns the number of bytes read from a <xref:System.IO.FileStream> and the <xref:System.Net.Dns.EndGetHostByName%2A> method returns an <xref:System.Net.IPHostEntry> object that contains information about a host computer.</span></span> <span data-ttu-id="6abb3-135">**End***OperationName* 메서드는 동기 버전의 메서드 서명에 선언된 out 또는 ref 매개 변수를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-135">The **End***OperationName* method takes any out or ref parameters declared in the signature of the synchronous version of the method.</span></span> <span data-ttu-id="6abb3-136">**End***OperationName* 메서드에는 동기 메서드의 매개 변수와 함께 <xref:System.IAsyncResult> 매개 변수도 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-136">In addition to the parameters from the synchronous method, the **End***OperationName* method also includes an <xref:System.IAsyncResult> parameter.</span></span> <span data-ttu-id="6abb3-137">호출자는 **Begin***OperationName*에 대한 해당 호출로 반환된 인스턴스를 전달해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-137">Callers must pass the instance returned by the corresponding call to **Begin***OperationName*.</span></span>  
  
 <span data-ttu-id="6abb3-138">**End***OperationName*이 호출되었을 때 <xref:System.IAsyncResult> 개체에 표시되는 비동기 작업이 완료되지 않은 경우에는 **End***OperationName*에서 비동기 작업이 완료될 때까지 해당 호출 스레드를 블로킹합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-138">If the asynchronous operation represented by the <xref:System.IAsyncResult> object has not completed when **End***OperationName* is called, **End***OperationName* blocks the calling thread until the asynchronous operation is complete.</span></span> <span data-ttu-id="6abb3-139">비동기 작업이 throw한 예외는 **End***OperationName* 메서드에서 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-139">Exceptions thrown by the asynchronous operation are thrown from the **End***OperationName* method.</span></span> <span data-ttu-id="6abb3-140">같은 <xref:System.IAsyncResult>로 **End***OperationName* 메서드를 여러 번 호출한 데 따른 효과는 정의되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-140">The effect of calling the **End***OperationName* method multiple times with the same <xref:System.IAsyncResult> is not defined.</span></span> <span data-ttu-id="6abb3-141">마찬가지로 관련된 Begin 메서드에서 반환하지 않은 <xref:System.IAsyncResult>로 **End***OperationName* 메서드를 호출하는 경우도 정의되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-141">Likewise, calling the **End***OperationName* method with an <xref:System.IAsyncResult> that was not returned by the related Begin method is also not defined.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6abb3-142">정의되지 않은 두 시나리오 중 하나의 경우 구현자는 <xref:System.InvalidOperationException>을 throw하는 것을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-142">For either of the undefined scenarios, implementers should consider throwing <xref:System.InvalidOperationException>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6abb3-143">이 디자인 패턴의 구현자는 <xref:System.IAsyncResult.IsCompleted%2A> 를 true로 설정하여 비동기 콜백 메서드(지정된 경우)를 호출하고 <xref:System.IAsyncResult.AsyncWaitHandle%2A>을 신호로 보내서 비동기 작업이 완료되었다는 것을 호출자에게 알려야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-143">Implementers of this design pattern should notify the caller that the asynchronous operation completed by setting <xref:System.IAsyncResult.IsCompleted%2A> to true, calling the asynchronous callback method (if one was specified) and signaling the <xref:System.IAsyncResult.AsyncWaitHandle%2A>.</span></span>  
  
 <span data-ttu-id="6abb3-144">응용 프로그램 개발자는 비동기 작업의 결과에 액세스하기 위해 여러 디자인을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-144">Application developers have several design choices for accessing the results of the asynchronous operation.</span></span> <span data-ttu-id="6abb3-145">어떤 선택이 올바른 선택인지는 응용 프로그램에 작업이 완료되는 동안 실행할 수 있는 지침이 있는지 여부에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-145">The correct choice depends on whether the application has instructions that can execute while the operation completes.</span></span> <span data-ttu-id="6abb3-146">비동기 작업의 결과를 받을 때까지 응용 프로그램이 추가 작업을 수행할 수 없는 경우 결과를 사용할 수 있을 때까지 응용 프로그램을 차단해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-146">If an application cannot perform any additional work until it receives the results of the asynchronous operation, the application must block until the results are available.</span></span> <span data-ttu-id="6abb3-147">비동기 작업이 완료될 때까지 차단하려면 다음 방법 중 하나를 사용하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-147">To block until an asynchronous operation completes, you can use one of the following approaches:</span></span>  
  
-   <span data-ttu-id="6abb3-148">응용 프로그램의 주 스레드에서 **End***OperationName*을 호출하여 작업이 완료될 때까지 응용 프로그램 실행을 블로킹합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-148">Call **End***OperationName* from the application’s main thread, blocking application execution until the operation is complete.</span></span> <span data-ttu-id="6abb3-149">이 기술을 설명하는 예제는 [비동기 작업을 종료하여 응용 프로그램 실행 차단](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6abb3-149">For an example that illustrates this technique, see [Blocking Application Execution by Ending an Async Operation](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md).</span></span>  
  
-   <span data-ttu-id="6abb3-150"><xref:System.IAsyncResult.AsyncWaitHandle%2A> 을 사용하여 하나 이상의 작업이 완료될 때까지 응용 프로그램 실행을 차단할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-150">Use the <xref:System.IAsyncResult.AsyncWaitHandle%2A> to block application execution until one or more operations are complete.</span></span> <span data-ttu-id="6abb3-151">이 방법을 설명하는 예제는 [Blocking Application Execution Using an AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6abb3-151">For an example that illustrates this technique, see [Blocking Application Execution Using an AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md).</span></span>  
  
 <span data-ttu-id="6abb3-152">비동기 작업이 완료되는 동안 차단할 필요가 없는 응용 프로그램은 다음 방법 중 하나를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-152">Applications that do not need to block while the asynchronous operation completes can use one of the following approaches:</span></span>  
  
-   <span data-ttu-id="6abb3-153"><xref:System.IAsyncResult.IsCompleted%2A> 속성을 정기적으로 점검하고 작업 완료 시 **End***OperationName*을 호출하는 방법으로 작업 완료 상태를 폴링합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-153">Poll for operation completion status by checking the <xref:System.IAsyncResult.IsCompleted%2A> property periodically and calling **End***OperationName* when the operation is complete.</span></span> <span data-ttu-id="6abb3-154">이 방법을 설명하는 예제는 [Polling for the Status of an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6abb3-154">For an example that illustrates this technique, see [Polling for the Status of an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md).</span></span>  
  
-   <span data-ttu-id="6abb3-155"><xref:System.AsyncCallback> 대리자를 사용하여 작업이 완료될 때 호출할 메서드를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="6abb3-155">Use an <xref:System.AsyncCallback> delegate to specify a method to be invoked when the operation is complete.</span></span> <span data-ttu-id="6abb3-156">이 방법을 설명하는 예제는 [Using an AsyncCallback Delegate to End an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6abb3-156">For an example that illustrates this technique, see [Using an AsyncCallback Delegate to End an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6abb3-157">참고 항목</span><span class="sxs-lookup"><span data-stu-id="6abb3-157">See Also</span></span>  
 [<span data-ttu-id="6abb3-158">EAP(이벤트 기반 비동기 패턴)</span><span class="sxs-lookup"><span data-stu-id="6abb3-158">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)  
 [<span data-ttu-id="6abb3-159">동기 메서드를 비동기 방식으로 호출</span><span class="sxs-lookup"><span data-stu-id="6abb3-159">Calling Synchronous Methods Asynchronously</span></span>](../../../docs/standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md)  
 [<span data-ttu-id="6abb3-160">AsyncCallback 대리자 및 상태 개체 사용</span><span class="sxs-lookup"><span data-stu-id="6abb3-160">Using an AsyncCallback Delegate and State Object</span></span>](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-and-state-object.md)
